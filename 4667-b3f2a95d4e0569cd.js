try{!function(){var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},t=(new e.Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="240c5186-97ab-4b0e-abe8-2323ef013bf5",e._sentryDebugIdIdentifier="sentry-dbid-240c5186-97ab-4b0e-abe8-2323ef013bf5")}()}catch(e){}"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4667],{254:(e,t,l)=>{l.d(t,{A:()=>n});var i=l(93519);let n=e=>(0,i.Y)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 24 24",fill:"currentColor",...e,children:(0,i.Y)("g",{children:(0,i.FD)("g",{children:[(0,i.Y)("path",{d:"M12 3c4.963 0 9 4.037 9 9s-4.037 9-9 9c-.58 0-1.047-.467-1.047-1.047s.467-1.047 1.047-1.047A6.913 6.913 0 0 0 18.906 12 6.913 6.913 0 0 0 12 5.094 6.913 6.913 0 0 0 5.094 12c0 .58-.467 1.047-1.047 1.047S3 12.58 3 12c0-4.963 4.037-9 9-9"}),(0,i.Y)("path",{fillRule:"evenodd",d:"M14.204 7.844a1.05 1.05 0 0 1 1.398.071c.382.382.406.99.072 1.399l-.072.08-1.596 1.594c.086.23.139.48.139.742v.005A2.144 2.144 0 1 1 12 9.592c.142 0 .276.02.4.046l1.724-1.723zM10.109 12.1l.005.02a2 2 0 0 1-.028-.187zm3.815-.37v.005a2 2 0 0 1-.009.197l.009-.197zm-.175-.794q.083.18.129.381l-.055-.196a2 2 0 0 0-.074-.185m-2.661-.896a2 2 0 0 0-.313.21l.149-.11a2 2 0 0 1 .164-.1M12 9.81c.165 0 .321.029.473.067l-.23-.047a2 2 0 0 0-.12-.014z",clipRule:"evenodd"})]})})})},2303:(e,t,l)=>{l.d(t,{A:()=>n});var i=l(93519);let n=e=>(0,i.Y)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 24 24",fill:"currentColor",...e,children:(0,i.Y)("g",{children:(0,i.Y)("path",{d:"M13 4.04c0-.951 1.173-1.401 1.81-.694l6.909 7.676c.355.395.355.994 0 1.39l-6.91 7.676c-.636.707-1.809.257-1.809-.695V15.87c-3.761 0-6.464 1.634-8.729 3.354-.67.51-1.627.074-1.569-.767C3.218 11.02 9.176 7.501 13 7.5z"})})})},4e3:(e,t,l)=>{l.d(t,{A:()=>n});var i=l(93519);let n=e=>(0,i.Y)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 24 24",fill:"currentColor",...e,children:(0,i.Y)("g",{children:(0,i.Y)("path",{fillRule:"evenodd",d:"M21.129 11.313c0 4.038-4.03 7.312-9 7.312-.923 0-1.814-.113-2.653-.323a1.05 1.05 0 0 0-.74.08l-4.471 2.31c-.896.463-1.836-.54-1.316-1.404l1.693-2.814c.234-.388.172-.88-.108-1.236-.89-1.134-1.405-2.48-1.405-3.925 0-4.04 4.03-7.313 9-7.313s9 3.274 9 7.313m-12 .987a1 1 0 1 0 0-2 1 1 0 0 0 0 2m3 0a1 1 0 1 0 0-2 1 1 0 0 0 0 2m4-1a1 1 0 1 1-2 0 1 1 0 0 1 2 0",clipRule:"evenodd"})})})},5899:(e,t,l)=>{l.d(t,{A:()=>n});var i=l(93519);let n=e=>(0,i.Y)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 24 24",fill:"currentColor",...e,children:(0,i.Y)("g",{children:(0,i.Y)("path",{d:"M12 4c-.631 0-1.143.512-1.143 1.143v5.714H5.143a1.143 1.143 0 0 0 0 2.286h5.714v5.714a1.143 1.143 0 0 0 2.286 0v-5.714h5.714a1.143 1.143 0 0 0 0-2.286h-5.714V5.143C13.143 4.512 12.63 4 12 4"})})})},6696:(e,t,l)=>{l.d(t,{a:()=>o});var i=l(76790),n=l(87862),r=l(91741);let a=e=>{switch(e){case r.L.PLAN_MODE:return"plan";case r.L.PRO_MODE:return"pro";case r.L.FAST_MODE:case r.L.FAST_SIMPLE_MODE:case r.L.A:case r.L.B:default:return"fast"}},o=()=>{let{data:e,isLoading:t,error:l}=(0,n.Gl)(n.dZ),o=e=>"string"==typeof e&&Object.values(r.L).includes(e),d=(0,i.useMemo)(()=>o(e)?e:r.L.CONTROL,[e]),s=(0,i.useMemo)(()=>[r.L.FAST_MODE,r.L.FAST_SIMPLE_MODE,r.L.PLAN_MODE,r.L.PRO_MODE].includes(d),[d]),c=(0,i.useMemo)(()=>a(d),[d]);return(0,i.useMemo)(()=>({isControlGroup:d===r.L.CONTROL,experimentGroup:d,isLoading:t,isError:!!l,isChatMobileExpEnabled:s,defaultChatMode:c}),[d,t,l,s,c])}},8578:(e,t,l)=>{l.d(t,{A:()=>n});var i=l(93519);let n=e=>(0,i.Y)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 24 24",fill:"currentColor",...e,children:(0,i.Y)("g",{children:(0,i.Y)("path",{d:"M14.707 20.293a1.005 1.005 0 0 1-1.42-1.425L16.175 16H6a1 1 0 0 1-1-1V5a1 1 0 0 1 2 0v9h9.175l-2.9-2.9a.999.999 0 1 1 1.412-1.412l4.606 4.605a1 1 0 0 1 0 1.414z"})})})},10575:(e,t,l)=>{l.d(t,{A:()=>a});var i=l(27580),n=l(74616),r=l(62727);let a=e=>t=>{var l,a,o,d;return(t=(0,i.Oe)(t,["global","mode"],n.J1.CUSTOM))[n.J1.CUSTOM]={...t[n.J1.CUSTOM],lyrics:(null===(l=e.metadata)||void 0===l?void 0:l.prompt)||"",styles:(null===(a=e.metadata)||void 0===a?void 0:a.tags)||"",excludeStyles:(null===(o=e.metadata)||void 0===o?void 0:o.negative_tags)||"",title:(0,r.p8)(e)},t=(0,i.Oe)(t,["global","activeLyrics"],(null===(d=e.metadata)||void 0===d?void 0:d.prompt)||""),t=(0,i.Oe)(t,["global","activeLyricsMode"],"custom"),t=(0,i.Oe)(t,["global","activeLyricsModeTab"],"custom")}},10890:(e,t,l)=>{l.d(t,{A:()=>n});var i=l(93519);let n=e=>(0,i.Y)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 24 24",fill:"currentColor",...e,children:(0,i.Y)("g",{children:(0,i.FD)("g",{children:[(0,i.Y)("path",{d:"M11.621 5h4.24l-3 3H8.62zM19 8h-4.725l3-3h.17C18.303 5 19 5.696 19 6.556zM10.207 5H6.556C5.696 5 5 5.696 5 6.556V8h2.207z"}),(0,i.Y)("path",{fillRule:"evenodd",d:"M5 9h14v8.444c0 .86-.696 1.556-1.556 1.556H6.556C5.696 19 5 18.304 5 17.444zm5 7.514v-5.028a.46.46 0 0 1 .146-.346.48.48 0 0 1 .467-.122q.067.018.128.055l3.96 2.514a.47.47 0 0 1 .163.182.51.51 0 0 1 0 .462.47.47 0 0 1-.164.182l-3.96 2.514a.5.5 0 0 1-.254.073.48.48 0 0 1-.34-.14.46.46 0 0 1-.146-.346",clipRule:"evenodd"})]})})})},12581:(e,t,l)=>{l.d(t,{A:()=>d});var i=l(93519),n=l(93553),r=l(76790),a=l(61017),o=l(15569);let d=e=>{let{label:t,labelClassName:l,containerClassName:d,wrapperClassName:s,thumbClassName:c,checked:u=!1,onChange:v,disabled:p=!1,small:m=!1}=e,[h,g]=(0,r.useState)(u);(0,r.useEffect)(()=>{g(u)},[u]);let{pressProps:f}=(0,a.d)({onPress:()=>{!p&&(g(!h),v&&v(!h))}});return(0,i.FD)("div",{className:(0,o.QP)("flex items-center space-x-2",s),children:[(0,i.Y)("div",{"aria-label":t,tabIndex:0,className:(0,o.QP)((0,n.A)("relative inline-flex items-center rounded-full ring-1 transition-colors duration-300 ease-in-out",{"h-4 w-7":m,"h-6 w-10":!m,"bg-foreground-primary ring-foreground-tertiary":h,"bg-background-tertiary ring-foreground-tertiary/20":!h,"cursor-not-allowed opacity-50":p,"cursor-pointer":!p}),d),...f,children:(0,i.Y)("span",{className:(0,o.QP)((0,n.A)("absolute top-0.5 left-0.5 rounded-full border","transform transition-transform duration-300 ease-in-out",{"h-3 w-3":m,"h-5 w-5":!m,"border-foreground-tertiary/20 bg-background-tertiary":h,"bg-foreground-primary/75":!h,"translate-x-3":h&&m,"translate-x-4":h&&!m}),c)})}),t&&(0,i.Y)("span",{className:(0,o.QP)((0,n.A)("font-sans text-sm font-normal select-none",{"text-foreground-tertiary":p,"text-foreground-primary":!p}),l),children:t})]})}},13730:(e,t,l)=>{l.d(t,{A:()=>n});var i=l(93519);let n=e=>(0,i.Y)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 24 24",fill:"currentColor",...e,children:(0,i.Y)("g",{children:(0,i.FD)("g",{children:[(0,i.Y)("path",{d:"M3.202 14.173a1 1 0 0 1 1.13-.72l.1.022 2.892.797a1 1 0 0 1-.53 1.927l-.49-.135a6.997 6.997 0 0 0 11.707-.477c.21-.349.575-.587.982-.587.729 0 1.233.722.88 1.36A9 9 0 0 1 12 21a8.99 8.99 0 0 1-7.495-4.023l-.17.62a1 1 0 0 1-1.928-.532zM12 10a2 2 0 1 1 0 4 2 2 0 0 1 0-4"}),(0,i.Y)("path",{d:"M12 3a9 9 0 0 1 7.86 4.62l.224-.518a1 1 0 0 1 1.838.788l-1.183 2.758a1 1 0 0 1-1.216.56l-.097-.036-2.757-1.183a1 1 0 0 1 .788-1.838l.532.229A7 7 0 0 0 12 5a7 7 0 0 0-6.01 3.412c-.209.35-.574.588-.982.588-.728 0-1.233-.722-.88-1.36A9 9 0 0 1 12 3"})]})})})},14347:(e,t,l)=>{l.d(t,{A:()=>n});var i=l(93519);let n=e=>(0,i.Y)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 24 24",fill:"currentColor",...e,children:(0,i.Y)("g",{children:(0,i.Y)("path",{d:"M18.881 8.288q.648 0 1.133.494.486.495.486 1.154v1.648a1.7 1.7 0 0 1-.121.618l-2.429 5.81a1.66 1.66 0 0 1-.607.7q-.425.288-.89.288H9.975q-.668 0-1.143-.484a1.6 1.6 0 0 1-.476-1.164V8.968q0-.33.132-.629.13-.299.354-.525l4.392-4.45a1.3 1.3 0 0 1 1.517-.206q.385.207.557.577.172.371.07.762l-.91 3.79zM5.119 19q-.668 0-1.143-.484a1.6 1.6 0 0 1-.476-1.164V9.936q0-.68.476-1.164a1.55 1.55 0 0 1 1.143-.484q.667 0 1.144.484.475.484.475 1.164v7.416q0 .68-.476 1.164A1.55 1.55 0 0 1 5.12 19"})})})},15627:(e,t,l)=>{l.d(t,{A:()=>n});var i=l(93519);let n=e=>(0,i.Y)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 24 24",fill:"currentColor",...e,children:(0,i.Y)("g",{children:(0,i.FD)("g",{children:[(0,i.Y)("path",{d:"M16.437 9.99H7.553a.566.566 0 0 0-.558.572v3.856c0 .314.25.572.558.572h8.884a.566.566 0 0 0 .558-.572v-3.856a.566.566 0 0 0-.558-.572"}),(0,i.Y)("path",{fillRule:"evenodd",d:"M22 10.4c0 .24-.17.46-.42.52v-.01c-.72.18-1.25.82-1.25 1.57s.53 1.39 1.25 1.57c.25.06.42.27.42.52v2.23c0 1.2-.99 2.17-2.22 2.17H4.22C3 18.97 2 18 2 16.8v-2.23c0-.24.17-.46.42-.52.72-.18 1.25-.82 1.25-1.57s-.53-1.39-1.25-1.57a.53.53 0 0 1-.42-.52V8.16C2 6.96 3 5.99 4.22 6h15.56C21 6 22 6.97 22 8.17zM16.45 16c.61 0 1.55-.74 1.55-1.34v-4.33c0-.6-.94-1.33-1.55-1.33H7.56C6.95 9 6 9.73 6 10.33v4.33c0 .6.95 1.34 1.56 1.34z",clipRule:"evenodd"})]})})})},16577:(e,t,l)=>{l.d(t,{D:()=>n});var i=l(44367);function n(e){let t=i.A,l="Backspace"===e?"Backspace":e.toUpperCase();return"⌘"===t?"".concat(t).concat(l):"".concat(t,"+").concat(l)}},19669:(e,t,l)=>{l.d(t,{A:()=>n});var i=l(93519);let n=e=>(0,i.Y)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 24 24",fill:"currentColor",...e,children:(0,i.Y)("g",{children:(0,i.Y)("path",{d:"M17.247 15c.723 0 1.309.592 1.309 1.322v1.982c0 .73-.586 1.322-1.309 1.322H9.396a1.316 1.316 0 0 1-1.309-1.322v-1.982c0-.73.586-1.322 1.309-1.322zm-6.464-6.235a2.4 2.4 0 0 0 1.306 1.298l1.223.501.11.27v1.235c0 .73-.586 1.323-1.309 1.323H5.31A1.316 1.316 0 0 1 4 12.07v-1.982c0-.73.586-1.323 1.309-1.323zm4.445-4.197a.906.906 0 0 1 1.681 0l.595 1.466a.9.9 0 0 0 .497.5l1.456.6c.3.123.481.367.542.636a.9.9 0 0 1-.563.885l-1.457.598a.91.91 0 0 0-.498.5l-.595 1.467a.906.906 0 0 1-1.681 0l-.595-1.466a.91.91 0 0 0-.498-.501l-1.457-.598a.9.9 0 0 1-.54-.637.9.9 0 0 1 .563-.884l1.457-.6a.9.9 0 0 0 .497-.5z"})})})},20903:(e,t,l)=>{l.d(t,{A:()=>n});var i=l(93519);let n=e=>(0,i.Y)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 24 24",fill:"currentColor",...e,children:(0,i.Y)("g",{children:(0,i.FD)("g",{children:[(0,i.Y)("path",{fillRule:"evenodd",d:"M16.432 6.681a2.66 2.66 0 0 1 2.66 2.66v8.864a2.66 2.66 0 0 1-2.66 2.66H7.568a2.66 2.66 0 0 1-2.66-2.66V9.341a2.66 2.66 0 0 1 2.66-2.66zm-6.257 3.546a.62.62 0 0 0-.43.165.53.53 0 0 0-.183.41v5.943q0 .243.184.408a.62.62 0 0 0 .59.144.7.7 0 0 0 .161-.064l4.994-2.972a.57.57 0 0 0 0-.976l-4.994-2.972a.66.66 0 0 0-.322-.086",clipRule:"evenodd"}),(0,i.Y)("path",{d:"M14.66 4.909a1.77 1.77 0 0 1 1.533.886H7.807a1.77 1.77 0 0 1 1.534-.886zM12.887 3.136a1.77 1.77 0 0 1 1.533.886H9.58a1.77 1.77 0 0 1 1.534-.886z"})]})})})},23366:(e,t,l)=>{l.d(t,{I:()=>a,a:()=>r});var i=l(52471),n=l(68835);let r=e=>{var t;let{session:l}=(0,i.gy)();return!!e&&e.user_id===(null===(t=l.user)||void 0===t?void 0:t.id)},a=()=>{let{session:e}=(0,i.gy)();return(0,n.Xl)(e)}},24015:(e,t,l)=>{l.d(t,{A:()=>n});var i=l(93519);let n=e=>(0,i.Y)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 24 24",fill:"currentColor",...e,children:(0,i.Y)("g",{children:(0,i.Y)("path",{d:"M12 15.575q-.2 0-.375-.062a.9.9 0 0 1-.325-.213l-3.6-3.6a.92.92 0 0 1-.288-.7q.014-.4.288-.7.3-.3.712-.312a.93.93 0 0 1 .713.287L11 12.15V5q0-.424.287-.713A.97.97 0 0 1 12 4q.424 0 .713.287Q13 4.576 13 5v7.15l1.875-1.875a.93.93 0 0 1 .713-.287Q16 10 16.3 10.3q.276.3.287.7a.92.92 0 0 1-.287.7l-3.6 3.6q-.15.15-.325.212a1.1 1.1 0 0 1-.375.063M6 20q-.824 0-1.412-.587A1.93 1.93 0 0 1 4 18v-2q0-.424.287-.713A.97.97 0 0 1 5 15q.424 0 .713.287Q6 15.576 6 16v2h12v-2q0-.424.288-.713A.97.97 0 0 1 19 15q.424 0 .712.287.288.288.288.713v2q0 .824-.587 1.413A1.93 1.93 0 0 1 18 20z"})})})},24501:(e,t,l)=>{l.d(t,{A:()=>n});var i=l(93519);let n=e=>(0,i.Y)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 24 24",fill:"currentColor",...e,children:(0,i.Y)("g",{children:(0,i.Y)("path",{d:"M4.446 19.913a1 1 0 0 1-.981-.094Q3 19.513 3 18.927V14.13L11.264 12 3 9.869V5.073q0-.585.465-.892a1 1 0 0 1 .981-.094l15.908 6.927Q21 11.307 21 12q0 .692-.646.986z"})})})},26850:(e,t,l)=>{l.d(t,{L:()=>r}),l(52471);var i=l(77310),n=l(56090);let r=async(e,t)=>{let l=()=>e.GET("/api/gen/{clip_id}/midi",{params:{path:{clip_id:t}}}),r=async function(){var e,t,a;let o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Date.now(),d=await l();if(d.error&&(null===(e=d.response)||void 0===e?void 0:e.status)===403)throw(0,i.oR)({title:"No permission to get MIDI",description:"MIDI transcription requires a Premier subscription",status:"error",duration:5e3,isClosable:!0}),Error("Permission denied: MIDI transcription requires a Premier subscription");if(Date.now()-o>3e5)throw Error("Timeout");if((null===(t=d.data)||void 0===t?void 0:t.state)==="running")return await (0,n.yy)(2500),r(o);if((null===(a=d.data)||void 0===a?void 0:a.state)==="complete")return d.data.instruments;throw console.error(d.error),Error(d.error||"Unknown error")};return await r()}},27279:(e,t,l)=>{l.d(t,{A:()=>n});var i=l(93519);let n=e=>(0,i.Y)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 24 24",fill:"currentColor",...e,children:(0,i.Y)("g",{children:(0,i.Y)("path",{d:"M12 3c-4.968 0-9 4.032-9 9s4.032 9 9 9 9-4.032 9-9-4.032-9-9-9m3.168 6.453c.495 0 .9.405.9.9s-.405.9-.9.9a.903.903 0 0 1-.9-.9c0-.495.396-.9.9-.9m-6.984.27a1.1 1.1 0 0 1 .297-.198.9.9 0 0 1 .684 0c.108.045.207.117.297.198a.9.9 0 0 1 .261.639c0 .243-.09.468-.261.63a.9.9 0 0 1-.297.198.9.9 0 0 1-.342.072.9.9 0 0 1-.342-.072.9.9 0 0 1-.297-.198.87.87 0 0 1-.261-.63c0-.234.09-.468.261-.639m7.614 7.425a.683.683 0 0 1-.846-.45c-.027-.09-.684-2.043-2.952-2.043h-.126c-2.277 0-2.925 1.953-2.952 2.043a.68.68 0 0 1-.846.441.67.67 0 0 1-.441-.837 4.41 4.41 0 0 1 4.248-2.988h.126a4.41 4.41 0 0 1 4.248 2.988.675.675 0 0 1-.45.846z"})})})},28394:(e,t,l)=>{l.d(t,{A:()=>g});var i=l(93519),n=l(76790),r=l(52471),a=l(77310),o=l(92698),d=l(45614),s=l(66623),c=l(50377),u=l(62727),v=l(16577);let p=e=>{let{clips:t,isTrashed:l,undoTrash:r}=e,[a,p]=(0,n.useState)(!1),m=(0,n.useRef)(!1),h=(0,n.useCallback)(async()=>{if(!m.current){m.current=!0;try{await r(),p(!0)}finally{m.current=!1}}},[r]);(0,n.useEffect)(()=>{if(a)return;let e=e=>{if(("z"===e.key||"Z"===e.key)&&(e.metaKey||e.ctrlKey)&&!e.shiftKey&&!e.altKey){let t=document.activeElement;!(t instanceof HTMLInputElement||t instanceof HTMLTextAreaElement||t instanceof HTMLElement&&"true"===t.getAttribute("contenteditable"))&&(e.preventDefault(),e.stopPropagation(),e.stopImmediatePropagation(),h())}};return window.addEventListener("keydown",e,!0),()=>{window.removeEventListener("keydown",e,!0)}},[a,h]);let g=1===t.length?t[0]:void 0;return(0,i.FD)("div",{className:"flex w-[320px] items-center justify-between rounded-md bg-accent-red p-4 text-white md:w-[475px]",children:[(0,i.FD)("div",{className:"flex-1",children:[" ",(0,i.Y)("span",{children:a?(0,i.FD)("div",{className:"flex items-center justify-center",children:[(0,i.Y)("div",{className:"mb-2",children:" Your action has been undone."}),(0,i.Y)(o.I,{as:s.A,ml:2,mb:2})]}):(0,i.FD)(i.FK,{children:[(0,i.Y)("span",{className:"inline font-bold",children:g?(0,u.p8)(g):"".concat(t.length," clips")}),l?" ".concat(g?"has":"have"," been moved to trash."):" ".concat(g?"has":"have"," been restored to your library.")]})})]}),!a&&(0,i.Y)(d.$,{bg:"red.400",color:"white",onClick:h,children:(0,i.FD)("div",{className:"flex items-center",children:[(0,i.Y)(o.I,{as:c.A,marginRight:"2"}),"Undo",(0,i.Y)("span",{className:"ml-2 text-xs opacity-80",children:(0,v.D)("Z")})]})})]})};var m=l(4709),h=l(85667);function g(){let{clips:e,library:t}=(0,r.gy)(),l=(0,m.i7)(h.vJ,e=>e.clipChanged);return{restoreFromTrash:(0,n.useCallback)(async n=>{let r=n.map(t=>e.clipById[t]).filter(e=>!!e);e.trashClips(n,!1),n.forEach(i=>{t.addToLibrary(i),e.addToCreatePage(i),l(e.clipById[i])}),(0,a.oR)({duration:4e3,isClosable:!0,position:"bottom",render:()=>(0,i.Y)(p,{clips:r,isTrashed:!1,undoTrash:()=>{e.trashClips(n,!0),n.forEach(i=>{l(e.clipById[i]),t.removeFromLibrary(i),e.removeFromCreatePage(i)})}})})},[e,t,l]),moveToTrash:(0,n.useCallback)(async n=>{let r=n.map(t=>e.clipById[t]).filter(e=>!!e);e.trashClips(n,!0),n.forEach(i=>{t.removeFromLibrary(i),e.removeFromCreatePage(i),l(e.clipById[i])}),(0,a.oR)({duration:4e3,isClosable:!0,position:"bottom",render:()=>(0,i.Y)(p,{clips:r,isTrashed:!0,undoTrash:()=>{e.trashClips(n,!1),n.forEach(i=>{l(e.clipById[i]),t.addToLibrary(i),e.addToCreatePage(i)})}})})},[e,t,l])}}},33642:(e,t,l)=>{l.d(t,{A:()=>n});var i=l(93519);let n=e=>(0,i.Y)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 24 24",fill:"currentColor",...e,children:(0,i.Y)("g",{children:(0,i.Y)("path",{d:"M12 22a9.7 9.7 0 0 1-3.9-.788 10.1 10.1 0 0 1-3.175-2.137q-1.35-1.35-2.137-3.175A9.7 9.7 0 0 1 2 12q0-2.075.788-3.9a10.1 10.1 0 0 1 2.137-3.175q1.35-1.35 3.175-2.137A9.7 9.7 0 0 1 12 2q2.075 0 3.9.788a10.1 10.1 0 0 1 3.175 2.137q1.35 1.35 2.137 3.175A9.7 9.7 0 0 1 22 12a9.7 9.7 0 0 1-.788 3.9 10.1 10.1 0 0 1-2.137 3.175q-1.35 1.35-3.175 2.137A9.7 9.7 0 0 1 12 22m0-2q1.35 0 2.6-.437a8 8 0 0 0 2.3-1.263L5.7 7.1a8 8 0 0 0-1.263 2.3A7.8 7.8 0 0 0 4 12q0 3.35 2.325 5.675T12 20m6.3-3.1q.825-1.05 1.262-2.3T20 12q0-3.35-2.325-5.675T12 4q-1.35 0-2.6.438A8 8 0 0 0 7.1 5.7z"})})})},33935:(e,t,l)=>{l.d(t,{A:()=>n});var i=l(93519);let n=e=>(0,i.Y)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 24 24",fill:"currentColor",...e,children:(0,i.Y)("g",{children:(0,i.Y)("g",{children:(0,i.Y)("path",{d:"M12 4c-.55 0-1 .45-1 1v14c0 .55.45 1 1 1s1-.45 1-1V5c0-.55-.45-1-1-1M9 7c-.55 0-1 .45-1 1v8c0 .55.45 1 1 1s1-.45 1-1V8c0-.55-.45-1-1-1M6 5.5c-.55 0-1 .45-1 1v11c0 .55.45 1 1 1s1-.45 1-1v-11c0-.55-.45-1-1-1M2 9.5c0-.55.45-1 1-1s1 .45 1 1v5c0 .55-.45 1-1 1s-1-.45-1-1zM19 8c.55 0 1 .45 1 1v2h2c.55 0 1 .45 1 1s-.45 1-1 1h-2v2c0 .55-.45 1-1 1s-1-.45-1-1v-2h-2c-.55 0-1-.45-1-1s.45-1 1-1h2V9c0-.55.45-1 1-1"})})})})},37412:(e,t,l)=>{l.d(t,{K:()=>a,S:()=>r});var i=l(76790);let n=(0,i.createContext)(void 0),r=n.Provider,a=()=>(0,i.useContext)(n)},37461:(e,t,l)=>{l.d(t,{A:()=>n});var i=l(93519);let n=e=>(0,i.Y)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 24 24",fill:"currentColor",...e,children:(0,i.Y)("g",{children:(0,i.Y)("path",{fillRule:"evenodd",d:"M19.081 4.77a.89.89 0 0 0-1.28 0 .936.936 0 0 0 0 1.307c3.185 3.25 3.185 8.503 0 11.754a.936.936 0 0 0 0 1.306.89.89 0 0 0 1.28 0c3.892-3.974 3.892-10.393 0-14.366m-12.883 0a.936.936 0 0 1 0 1.307c-3.184 3.25-3.184 8.595 0 11.846a.936.936 0 0 1 0 1.306.89.89 0 0 1-1.279 0c-3.892-3.973-3.892-10.485 0-14.458a.89.89 0 0 1 1.28 0m2.613 2.585a.936.936 0 0 1 .027 1.306c-1.76 1.871-1.742 4.816-.009 6.576a.936.936 0 0 1 0 1.306.89.89 0 0 1-1.279 0c-2.45-2.5-2.431-6.595-.01-9.17a.89.89 0 0 1 1.28-.027zm3.185 1.871c-1.507 0-2.722 1.241-2.722 2.779s1.216 2.778 2.722 2.778c1.505 0 2.721-1.24 2.721-2.778s-1.216-2.779-2.722-2.779m3.166-1.77a.89.89 0 0 1 1.279 0c2.45 2.502 2.431 6.596.009 9.17a.89.89 0 0 1-1.28.028.936.936 0 0 1-.026-1.306c1.76-1.87 1.742-4.816.009-6.576a.936.936 0 0 1 0-1.306z",clipRule:"evenodd"})})})},38411:(e,t,l)=>{l.d(t,{A:()=>n});var i=l(93519);let n=e=>(0,i.Y)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 24 24",fill:"currentColor",...e,children:(0,i.Y)("g",{children:(0,i.Y)("path",{d:"M3 12a9 9 0 1 1 18 0 9 9 0 0 1-18 0m9-3.375a3.375 3.375 0 1 1 0 6.75 3.375 3.375 0 0 1 0-6.75m0 7.875a4.5 4.5 0 1 0 0-9 4.5 4.5 0 0 0 0 9m0-3.375a1.125 1.125 0 1 0 0-2.25 1.125 1.125 0 0 0 0 2.25"})})})},38854:(e,t,l)=>{l.d(t,{A:()=>n});var i=l(93519);let n=e=>(0,i.Y)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 24 24",fill:"currentColor",...e,children:(0,i.Y)("g",{children:(0,i.Y)("g",{children:(0,i.Y)("path",{d:"M1.327 19.86c-.64 0-1.15-.52-1.15-1.15V6.15c0-.64.51-1.15 1.15-1.15s1.15.51 1.15 1.15v12.56c0 .63-.51 1.15-1.15 1.15M19.277 7.59c0-.56-.45-1.01-1.01-1.01H5.717c-.56 0-1.01.45-1.01 1.01v9.68c0 .56.45 1.01 1.01 1.01h12.55c.56 0 1.01-.45 1.01-1.01zM21.507 18.71c0 .63.52 1.15 1.15 1.15s1.15-.52 1.15-1.15V6.15a1.15 1.15 0 0 0-2.3 0z"})})})})},39025:(e,t,l)=>{l.d(t,{A:()=>n});var i=l(93519);let n=e=>(0,i.Y)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 24 24",fill:"currentColor",...e,children:(0,i.Y)("g",{children:(0,i.Y)("path",{d:"M6 20a.97.97 0 0 1-.713-.288A.97.97 0 0 1 5 19v-6H4a.97.97 0 0 1-.712-.287A.97.97 0 0 1 3 12q0-.424.288-.713A.97.97 0 0 1 4 11h4q.424 0 .713.287Q9 11.576 9 12q0 .424-.287.713A.97.97 0 0 1 8 13H7v6q0 .424-.287.712A.97.97 0 0 1 6 20M6 9a.97.97 0 0 1-.713-.287A.97.97 0 0 1 5 8V5q0-.424.287-.713A.97.97 0 0 1 6 4q.424 0 .713.287Q7 4.576 7 5v3q0 .424-.287.713A.97.97 0 0 1 6 9m4 0a.97.97 0 0 1-.713-.287A.97.97 0 0 1 9 8q0-.424.287-.713A.97.97 0 0 1 10 7h1V5q0-.424.287-.713A.97.97 0 0 1 12 4q.424 0 .713.287Q13 4.576 13 5v2h1q.424 0 .713.287Q15 7.576 15 8q0 .424-.287.713A.97.97 0 0 1 14 9zm2 11a.97.97 0 0 1-.713-.288A.97.97 0 0 1 11 19v-7q0-.424.287-.713A.97.97 0 0 1 12 11q.424 0 .713.287.287.288.287.713v7q0 .424-.287.712A.97.97 0 0 1 12 20m6 0a.97.97 0 0 1-.712-.288A.97.97 0 0 1 17 19v-2h-1a.97.97 0 0 1-.713-.288A.97.97 0 0 1 15 16q0-.424.287-.713A.97.97 0 0 1 16 15h4q.424 0 .712.287.288.288.288.713 0 .424-.288.712A.97.97 0 0 1 20 17h-1v2q0 .424-.288.712A.97.97 0 0 1 18 20m0-7a.97.97 0 0 1-.712-.287A.97.97 0 0 1 17 12V5q0-.424.288-.713A.97.97 0 0 1 18 4q.424 0 .712.287Q19 4.576 19 5v7q0 .424-.288.713A.97.97 0 0 1 18 13"})})})},44258:(e,t,l)=>{l.d(t,{A:()=>s});var i=l(76790),n=l(52471),r=l(86688),a=l(62972),o=l(21810),d=l(82485);function s(e){let{library:t}=(0,n.gy)(),{openModalWithData:l}=(0,a.k)(),{isContestSubmission:s,isContestEligible:c}=(0,i.useContext)(d.Ay),u=(0,i.useMemo)(()=>(null==e?void 0:e.is_public)||!1,[null==e?void 0:e.is_public]),v=(0,i.useCallback)(()=>{if(!e)return;let i=c({clip:e})?{actionName:"SubmitRemixButtonClicked",principalObjectType:"song",principalObjectValue:e.id}:{actionName:"PublishButtonPublishClicked",principalObjectType:"song",principalObjectValue:e.id};(0,o.Ay)(i),t.setActiveClip(e),l(r.H.PUBLISH_SONG,{clipId:e.id})},[t,l,e,c]),p=(0,i.useCallback)(()=>{var t,i,n;if(!e)return;let a=s({clip:e})?{actionName:"SubmitRemixButtonUnpublishClicked",principalObjectType:"song",principalObjectValue:e.id,context:{contestId:null!==(n=null===(i=e.metadata)||void 0===i?void 0:null===(t=i.contest_ids)||void 0===t?void 0:t[0])&&void 0!==n?n:null}}:{actionName:"PublishButtonUnpublishClicked",principalObjectType:"song",principalObjectValue:e.id};(0,o.Ay)(a),l(r.H.UNPUBLISH_SONG,{clipId:e.id})},[l,e,s]);return{togglePublishClicked:(0,i.useCallback)(()=>{e&&(u?p():v())},[u,v,p,!!e]),publishClicked:v,unpublishClicked:p,isPublished:u}}},44367:(e,t,l)=>{var i,n;l.d(t,{A:()=>r});let r="undefined"!=typeof navigator&&(null===(n=navigator)||void 0===n?void 0:null===(i=n.platform)||void 0===i?void 0:i.startsWith("Mac"))?"⌘":"ctrl"},48971:(e,t,l)=>{l.d(t,{B:()=>c});var i=l(76790),n=l(546),r=l(75245);let a=[{id:"starter-hip-hop",title:"Hip Hop",description:"Classic hip hop beats with heavy drums and bass",category:r.f.Genre,artworkUrl:null,fallbackColor:"hsl(35, 70%, 40%)",stackedTasks:[],lyrics:"",styles:"hip hop, boom bap drums, punchy 808 bass, vinyl crackle, sampled soul chops, head-nodding groove, crisp hi-hats, lo-fi warmth",isFavourite:!1,isStarterPack:!0,createdAt:0,updatedAt:0},{id:"starter-classical-piano",title:"Classical Piano",description:"Elegant piano compositions with emotional depth",category:r.f.Instrument,artworkUrl:null,fallbackColor:"hsl(220, 30%, 25%)",stackedTasks:[],lyrics:"",styles:"classical piano, solo piano, romantic era, expressive dynamics, legato phrasing, concert hall reverb, emotional, virtuosic passages, rubato",isFavourite:!1,isStarterPack:!0,createdAt:0,updatedAt:0},{id:"starter-afterhours-techno",title:"Afterhours Techno",description:"Dark, hypnotic techno for late night sessions",category:r.f.Genre,artworkUrl:null,fallbackColor:"hsl(270, 50%, 20%)",stackedTasks:[],lyrics:"",styles:"dark techno, hypnotic, driving kick drum, industrial textures, warehouse atmosphere, minimal, pulsing bassline, eerie pads, 130 bpm, relentless",isFavourite:!1,isStarterPack:!0,createdAt:0,updatedAt:0},{id:"starter-modern-funk",title:"Modern Funk",description:"Groovy modern funk with synths and tight drums",category:r.f.Genre,artworkUrl:null,fallbackColor:"hsl(320, 70%, 45%)",stackedTasks:[],lyrics:"",styles:"modern funk, synth funk, slap bass, tight drums, funky guitar riffs, vocoder, disco influence, groovy, analog synthesizers, dancefloor ready",isFavourite:!1,isStarterPack:!0,createdAt:0,updatedAt:0},{id:"starter-acoustic-folk",title:"Acoustic Folk",description:"Warm acoustic guitars and intimate storytelling",category:r.f.Genre,artworkUrl:null,fallbackColor:"hsl(30, 50%, 35%)",stackedTasks:[],lyrics:"",styles:"acoustic folk, fingerpicked guitar, warm and intimate, singer-songwriter, gentle percussion, harmonica, mandolin, campfire feel, authentic, heartfelt",isFavourite:!1,isStarterPack:!0,createdAt:0,updatedAt:0},{id:"starter-hardcore-dubstep",title:"Hardcore Dubstep",description:"Aggressive bass drops and intense wobbles",category:r.f.Genre,artworkUrl:null,fallbackColor:"hsl(150, 80%, 30%)",stackedTasks:[],lyrics:"",styles:"hardcore dubstep, massive bass drops, aggressive wobble bass, screeching synths, heavy drums, build-ups, intense, 140 bpm, filthy, headbanging",isFavourite:!1,isStarterPack:!0,createdAt:0,updatedAt:0},{id:"starter-festival-edm",title:"Festival EDM",description:"Big room anthems made for massive crowds",category:r.f.Genre,artworkUrl:null,fallbackColor:"hsl(200, 80%, 50%)",stackedTasks:[],lyrics:"",styles:"festival EDM, big room house, anthemic drops, euphoric synth leads, massive kicks, crowd energy, hands-up moment, 128 bpm, mainstage, uplifting breakdown",isFavourite:!1,isStarterPack:!0,createdAt:0,updatedAt:0},{id:"starter-mid-2000s-pop-rnb",title:"Mid-2000s Pop R&B",description:"Nostalgic R&B vibes from the 2000s era",category:r.f.Era,artworkUrl:null,fallbackColor:"hsl(280, 60%, 40%)",stackedTasks:[],lyrics:"",styles:"mid 2000s R&B, pop R&B, smooth vocals, syncopated drums, lush pads, Timbaland-style beats, T-Pain influence, club ready, nostalgic, polished production",isFavourite:!1,isStarterPack:!0,createdAt:0,updatedAt:0}],o=new Set(a.map(e=>e.id));function d(){let e=Math.floor(360*Math.random()),t=60+Math.floor(20*Math.random()),l=35+Math.floor(15*Math.random());return"hsl(".concat(e,", ").concat(t,"%, ").concat(l,"%)")}function s(){return"card-".concat(Date.now(),"-").concat(Math.random().toString(36).substring(2,9))}function c(){let[e,t]=(0,n.Mj)("decks-card-library-v1",[]),l=(0,i.useMemo)(()=>[...e,...a],[e]),c=(0,i.useCallback)(e=>{var l,i;let n=Date.now(),{isStarterPack:a,...o}=e,c={...o,id:s(),category:null!==(l=o.category)&&void 0!==l?l:r.f.Other,fallbackColor:null!==(i=o.fallbackColor)&&void 0!==i?i:d(),isFavourite:!1,isStarterPack:void 0,createdAt:n,updatedAt:n};return t(e=>[...e,c]),c},[t]),u=(0,i.useCallback)(e=>{let l=Date.now(),i=e.map((e,t)=>{var i,n;let{isStarterPack:a,...o}=e;return{...o,id:s()+"-".concat(t),category:null!==(i=o.category)&&void 0!==i?i:r.f.Other,fallbackColor:null!==(n=o.fallbackColor)&&void 0!==n?n:d(),isFavourite:!1,isStarterPack:void 0,createdAt:l+t,updatedAt:l+t}});return t(e=>[...e,...i]),i},[t]),v=(0,i.useCallback)(e=>{var l;if(l=e.id,o.has(l))return null;let i=null;return t(t=>t.map(t=>t.id===e.id?i={...t,...e,updatedAt:Date.now()}:t)),i},[t]),p=(0,i.useCallback)(e=>{if(o.has(e))return!1;let l=!1;return t(t=>t.filter(t=>t.id!==e||(l=!0,!1))),l},[t]),m=(0,i.useCallback)(e=>{if(o.has(e))return null;let l=null;return t(t=>t.map(t=>t.id===e?l={...t,isFavourite:!t.isFavourite,updatedAt:Date.now()}:t)),l},[t]),h=(0,i.useCallback)(t=>(null==t?void 0:t.favouritesOnly)?e.filter(e=>e.isFavourite):l,[l,e]),g=(0,i.useCallback)(t=>{let l=e.find(e=>e.id===t);return l||a.find(e=>e.id===t)},[e]);return(0,i.useMemo)(()=>({cards:l,saveCard:c,importCards:u,updateCard:v,deleteCard:p,favouriteCard:m,listCards:h,getCard:g}),[l,c,u,v,p,m,h,g])}},49016:(e,t,l)=>{l.d(t,{A:()=>n});var i=l(93519);let n=e=>(0,i.Y)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 24 24",fill:"currentColor",...e,children:(0,i.Y)("g",{children:(0,i.Y)("path",{d:"M17.625 17.024C19.682 15.579 21 13.364 21 10.875 21 6.526 16.971 3 12 3s-9 3.526-9 7.875c0 2.486 1.318 4.704 3.375 6.149V21H9.75v-2.25h1.125V21h2.25v-2.25h1.125V21h3.375zM6.375 12a2.25 2.25 0 1 1 4.5 0 2.25 2.25 0 0 1-4.5 0m9-2.25a2.25 2.25 0 1 1 0 4.5 2.25 2.25 0 0 1 0-4.5"})})})},50377:(e,t,l)=>{l.d(t,{A:()=>n});var i=l(93519);let n=e=>(0,i.Y)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 24 24",fill:"currentColor",...e,children:(0,i.Y)("g",{children:(0,i.Y)("path",{d:"M8.465 18.882a1 1 0 1 1 0-2h6.1q1.575 0 2.737-1t1.163-2.5-1.163-2.5-2.737-1h-6.3l1.9 1.9a.99.99 0 0 1-1.4 1.4l-4.3-4.3 4.3-4.3a.99.99 0 1 1 1.4 1.4l-1.9 1.9h6.3q2.425 0 4.162 1.575 1.738 1.576 1.738 3.925 0 2.35-1.738 3.925t-4.162 1.575z"})})})},50999:(e,t,l)=>{l.d(t,{A:()=>a});var i=l(61200),n=l(546),r=l(52471);let a=e=>{var t,l;let{session:a,playbar:o}=(0,r.gy)(),[d,s]=(0,n.Fo)("hasBeenPlayed-aug-23-2025-".concat(null==e?void 0:e.id),!1);if(!e)return[!1,i.A];let c="queued"===e.status||"submitted"===e.status||"processing"===e.status;return[!(0===e.play_count&&0===((null===(t=e.reaction)||void 0===t?void 0:t.play_count)||0)&&!c&&!d&&(null===(l=a.user)||void 0===l?void 0:l.id)===e.user_id&&!o.recentlyPlayedIds.includes(e.id)),s]}},51278:(e,t,l)=>{l.d(t,{A:()=>n});var i=l(93519);let n=e=>(0,i.Y)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 24 24",fill:"currentColor",...e,children:(0,i.Y)("g",{children:(0,i.Y)("path",{d:"M4 17a1 1 0 1 1 0-2h6a1 1 0 1 1 0 2zm0-4a1 1 0 1 1 0-2h10a1 1 0 1 1 0 2zm0-4a1 1 0 0 1 0-2h10a1 1 0 1 1 0 2zm13.555 11.964A1 1 0 0 1 16 20.132v-4.264a1 1 0 0 1 1.555-.832l3.197 2.132a1 1 0 0 1 0 1.664z"})})})},53899:(e,t,l)=>{l.d(t,{A:()=>n});var i=l(93519);let n=e=>(0,i.Y)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 24 24",fill:"currentColor",...e,children:(0,i.Y)("g",{children:(0,i.Y)("g",{children:(0,i.Y)("path",{d:"M14.667 20q-1.513 0-2.59-1.044T11 16.444t1.077-2.51 2.59-1.045q.527 0 .974.122.446.123.859.367v-8.49q0-.377.264-.632A.9.9 0 0 1 17.417 4h3.666q.39 0 .654.256.263.255.263.633v1.778a.85.85 0 0 1-.264.633.9.9 0 0 1-.653.256h-2.75v8.888q0 1.467-1.077 2.512T14.666 20M3 6a1 1 0 0 1 1-1h7a1 1 0 1 1 0 2H4a1 1 0 0 1-1-1M4 9a1 1 0 0 0 0 2h8a1 1 0 1 0 0-2zM3 14a1 1 0 0 1 1-1h5a1 1 0 1 1 0 2H4a1 1 0 0 1-1-1M4 17a1 1 0 1 0 0 2h3a1 1 0 1 0 0-2z"})})})})},55554:(e,t,l)=>{l.d(t,{A:()=>n});var i=l(93519);let n=e=>(0,i.Y)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 24 24",fill:"currentColor",...e,children:(0,i.Y)("g",{children:(0,i.Y)("path",{d:"M19.039 20.1c-.477 0-.936-.189-1.268-.531l-4.552-4.554a1.71 1.71 0 0 0-2.429 0l-.36.36c-.324.324-.368.81-.297 1.26.045.252.063.513.063.765 0 .99-.35 1.836-1.061 2.547A3.46 3.46 0 0 1 6.598 21c-.99 0-1.835-.351-2.546-1.053A3.48 3.48 0 0 1 3 17.4q0-1.485 1.052-2.538C4.754 14.16 5.61 13.8 6.598 13.8c.252 0 .513.018.765.063.45.081.935.027 1.26-.297l.359-.36a1.71 1.71 0 0 0 0-2.43l-.36-.36c-.324-.324-.81-.369-1.26-.297a4.4 4.4 0 0 1-.764.063c-.99 0-1.835-.351-2.546-1.062A3.46 3.46 0 0 1 3 6.582c0-.99.35-1.818 1.052-2.529A3.48 3.48 0 0 1 6.598 3q1.484 0 2.537 1.053c.702.702 1.061 1.557 1.061 2.547 0 .252-.027.513-.063.765-.08.45-.027.936.297 1.26l10.381 10.386a.64.64 0 0 1 .189.45.64.64 0 0 1-.639.639H19.04m-3.445-9.9a1.275 1.275 0 0 1-1.8 0 1.277 1.277 0 0 1 0-1.8l3.968-3.969A1.78 1.78 0 0 1 19.03 3.9h1.313c.351 0 .639.288.639.639a.6.6 0 0 1-.189.45L15.585 10.2zM6.598 8.4c.495 0 .918-.18 1.269-.531s.53-.774.53-1.269-.18-.918-.53-1.269A1.73 1.73 0 0 0 6.598 4.8c-.495 0-.917.18-1.268.531q-.528.526-.53 1.269.002.742.53 1.269c.35.351.773.531 1.268.531m5.398 4.05a.44.44 0 0 0 .314-.135.437.437 0 0 0 0-.63.436.436 0 0 0-.63 0 .437.437 0 0 0 0 .63c.09.09.199.135.316.135M6.598 19.2c.495 0 .918-.18 1.269-.531s.53-.774.53-1.269-.18-.918-.53-1.269a1.73 1.73 0 0 0-1.269-.531c-.495 0-.917.18-1.268.531q-.528.526-.53 1.269.002.742.53 1.269c.35.351.773.531 1.268.531"})})})},58857:(e,t,l)=>{l.d(t,{A:()=>n});var i=l(93519);let n=e=>(0,i.Y)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 24 24",fill:"currentColor",...e,children:(0,i.Y)("g",{children:(0,i.Y)("path",{d:"M6 12v8q0 .424-.287.712A.97.97 0 0 1 5 21a.97.97 0 0 1-.713-.288A.97.97 0 0 1 4 20V3q0-.424.287-.712A.97.97 0 0 1 5 2h13.525a.94.94 0 0 1 .825.45q.124.2.162.438a.9.9 0 0 1-.062.487L18 7l1.45 3.625q.1.25.063.488-.039.237-.163.437a.944.944 0 0 1-.825.45z"})})})},58981:(e,t,l)=>{l.d(t,{Jb:()=>n,YY:()=>o,mm:()=>r,sw:()=>a,zg:()=>d});var i=l(28508);let n={ids:{presence:i.L.Any},liked:i.L.Any,disliked:i.L.Any,public:i.L.Any,fullSong:i.L.Any,upload:i.L.Any,trashed:i.L.Any,belowLoudnessThreshold:i.L.Any,fromStudioProject:{presence:i.L.Any},stem:{presence:i.L.Any},persona:{presence:i.L.Any},cover:{presence:i.L.Any},extend:{presence:i.L.Any},remaster:{presence:i.L.Any},concat:{presence:i.L.Any},workspace:{presence:i.L.Any},playlist:{presence:i.L.Any},user:{presence:i.L.Any},searchText:"",sort:{sortBy:"created_at",sortDirection:"desc"}},r=(e,t)=>({...n,trashed:i.L.False,disliked:i.L.False,fromStudioProject:{presence:i.L.False},stem:{presence:i.L.False},workspace:{presence:i.L.True,workspaceId:t},user:{presence:i.L.Any}}),a=e=>({...n,trashed:i.L.False,disliked:i.L.False,fromStudioProject:{presence:i.L.False},stem:{presence:i.L.False},user:{presence:i.L.True,userId:e}}),o=()=>({...n,trashed:i.L.True}),d=()=>({...n,user:{presence:i.L.False,userId:""}})},61183:(e,t,l)=>{l.d(t,{Ay:()=>c,Ky:()=>s});var i=l(93519),n=l(76790),r=l(52471),a=l(4709);let o=()=>{let{menus:e}=(0,r.gy)(),[t,l]=(0,n.useState)([]),[i,a]=(0,n.useState)(null),o=(0,n.useCallback)(e=>{l(t=>t.includes(e)?t.filter(t=>t!==e):[...t,e]),a(e)},[]),d=(0,n.useCallback)((e,t)=>{if(!i){l([e]),a(e);return}let n=t.indexOf(i),r=t.indexOf(e);if(-1===n||-1===r){o(e);return}let d=Math.min(n,r),s=Math.max(n,r),c=t.slice(d,s+1);l(e=>Array.from(new Set([...e,...c]))),a(e)},[i,o]),s=(0,n.useCallback)(()=>{l([])},[]),c=(0,n.useCallback)(e=>{a(e)},[]);(0,n.useEffect)(()=>{e.setSelected(new Set(t))},[t,e.setSelected]);let u=(0,n.useCallback)(e=>{l(e)},[]);return(0,n.useMemo)(()=>({selectedClipIds:t,toggleClip:o,selectRange:d,clear:s,setSelectedClipIds:u,setLastSelected:c}),[t,o,d,s,u,c])},d=(0,a.q6)({selectedClipIds:[],toggleClip:()=>{},selectRange:()=>{},clear:()=>{},setSelectedClipIds:()=>{},setLastSelected:()=>{}}),s=e=>{let{children:t}=e,l=o();return(0,i.Y)(d.Provider,{value:l,children:t})},c=d},66009:(e,t,l)=>{l.d(t,{S:()=>g});var i=l(93519),n=l(76790),r=l(78293),a=l(95591),o=l(12358),d=l(85721),s=l(78595),c=l(67091),u=l(62727),v=l(42078),p=l(56090),m=l(74616);let h=(0,o.PA)(function(e){let{task:t,onRemove:l}=e,{clip:a,isLoading:o}=(0,s.Ay)(t.id),h=(0,n.useCallback)(()=>{null==l||l(t.id)},[t.id,l]),g=a?(0,u.p8)(a):"Loading...",f=function(e){let t=m.bD[e];return(null==t?void 0:t.label)||e}(t.task),y="extend"===t.task?"Extend from ".concat((0,p.N8)(t.continueAt,1)):"infill"===t.task?"Replace ".concat((0,p.N8)(t.infillStartS,1)," - ").concat((0,p.N8)(t.infillEndS,1)):"startS"in t&&"endS"in t&&void 0!==t.startS&&void 0!==t.endS?"".concat((0,p.N8)(t.startS,1)," - ").concat((0,p.N8)(t.endS,1)):null;return(0,i.FD)("div",{className:"flex items-center gap-3 rounded-lg border border-border-primary bg-background-secondary p-2",children:[(0,i.Y)("div",{className:"h-10 w-10 flex-shrink-0 overflow-hidden rounded",children:(null==a?void 0:a.image_url)?(0,i.Y)(d.Ay,{imageSize:v.C54,className:"h-full w-full object-cover",src:a.image_url,alt:g}):(0,i.Y)("div",{className:"h-full w-full bg-background-fog-thin"})}),(0,i.FD)("div",{className:"flex min-w-0 flex-1 flex-col",children:[(0,i.FD)("div",{className:"flex items-center gap-2",children:[(0,i.Y)("span",{className:"truncate text-sm font-medium text-foreground-primary",children:o?"Loading...":g}),(0,i.Y)("span",{className:"flex-shrink-0 rounded bg-background-fog-thin px-1.5 py-0.5 text-xs text-foreground-secondary",children:f})]}),y&&(0,i.Y)("span",{className:"text-xs text-foreground-tertiary",children:y})]}),l&&(0,i.Y)(r.Ay,{variant:r.Ak.Tertiary,shape:r.aH.Pill,size:r.Mp.Small,icon:c.A,onClick:h,"aria-label":"Remove condition",className:"flex-shrink-0"})]})});function g(e){let{onDialogAction:t,initialStackedTasks:l,initialLyrics:o="",initialStyles:d="",initialExcludeStyles:s="",initialTitle:c="",initialDescription:u=""}=e,[v,p]=(0,n.useState)(c),[m,g]=(0,n.useState)(u),[f,y]=(0,n.useState)(l),[C,w]=(0,n.useState)(o),[b,A]=(0,n.useState)(d),[k,x]=(0,n.useState)(s),Y=(0,n.useCallback)(e=>{y(t=>t.filter(t=>t.id!==e))},[]),S=(0,n.useCallback)(()=>{v.trim()&&0!==f.length&&t({title:v.trim(),description:m.trim(),stackedTasks:f,lyrics:C.trim(),styles:b.trim()||void 0,excludeStyles:k.trim()||void 0})},[v,m,f,C,b,k,t]),M=(0,n.useCallback)(()=>{t(!1)},[t]),T=(0,n.useCallback)(e=>{"Enter"===e.key&&!e.shiftKey&&v.trim()&&f.length>0&&(e.preventDefault(),S())},[S,v,f.length]),I=v.trim().length>0&&f.length>0;return(0,i.FD)("div",{className:"flex w-full flex-col gap-4 px-4",children:[(0,i.Y)(a.WE,{children:"Save as Card"}),(0,i.Y)(a.m1,{children:"Save this stack configuration as a reusable card."}),(0,i.FD)("div",{className:"flex flex-col gap-3",children:[(0,i.FD)("div",{className:"flex flex-col gap-1",children:[(0,i.FD)("label",{htmlFor:"card-title",className:"text-sm font-medium text-foreground-secondary",children:["Title ",(0,i.Y)("span",{className:"text-accent-error",children:"*"})]}),(0,i.Y)("input",{id:"card-title",type:"text",value:v,onChange:e=>p(e.target.value),onKeyDown:T,placeholder:"e.g., My Lo-Fi Stack",className:"focus:border-accent-primary rounded-md border border-border-primary bg-background-secondary px-3 py-2 text-sm text-foreground-primary placeholder:text-foreground-tertiary focus:outline-none",autoFocus:!0})]}),(0,i.FD)("div",{className:"flex flex-col gap-1",children:[(0,i.Y)("label",{htmlFor:"card-description",className:"text-sm font-medium text-foreground-secondary",children:"Description"}),(0,i.Y)("textarea",{id:"card-description",value:m,onChange:e=>g(e.target.value),placeholder:"Describe what this card does...",rows:2,className:"focus:border-accent-primary resize-none rounded-md border border-border-primary bg-background-secondary px-3 py-2 text-sm text-foreground-primary placeholder:text-foreground-tertiary focus:outline-none"})]}),(0,i.FD)("div",{className:"flex flex-col gap-1",children:[(0,i.FD)("label",{className:"text-sm font-medium text-foreground-secondary",children:["Conditions (",f.length,")"]}),f.length>0?(0,i.Y)("div",{className:"flex max-h-32 flex-col gap-2 overflow-y-auto",children:f.map((e,t)=>(0,i.Y)(h,{task:e,onRemove:f.length>1?Y:void 0},"".concat(e.id,"-").concat(t)))}):(0,i.Y)("div",{className:"rounded-md border border-border-primary bg-background-secondary p-3 text-center text-sm text-foreground-tertiary",children:"No conditions - at least one is required"})]}),(0,i.FD)("div",{className:"flex flex-col gap-1",children:[(0,i.Y)("label",{htmlFor:"card-lyrics",className:"text-sm font-medium text-foreground-secondary",children:"Lyrics"}),(0,i.Y)("textarea",{id:"card-lyrics",value:C,onChange:e=>w(e.target.value),placeholder:"Lyrics for this card (optional)...",rows:3,className:"focus:border-accent-primary resize-none rounded-md border border-border-primary bg-background-secondary px-3 py-2 font-mono text-xs text-foreground-primary placeholder:text-foreground-tertiary focus:outline-none"})]}),(0,i.FD)("div",{className:"flex flex-col gap-1",children:[(0,i.Y)("label",{htmlFor:"card-styles",className:"text-sm font-medium text-foreground-secondary",children:"Styles"}),(0,i.Y)("textarea",{id:"card-styles",value:b,onChange:e=>A(e.target.value),placeholder:"Style tags (optional)...",rows:2,className:"focus:border-accent-primary resize-none rounded-md border border-border-primary bg-background-secondary px-3 py-2 text-sm text-foreground-primary placeholder:text-foreground-tertiary focus:outline-none"})]}),(0,i.FD)("div",{className:"flex flex-col gap-1",children:[(0,i.Y)("label",{htmlFor:"card-exclude-styles",className:"text-sm font-medium text-foreground-secondary",children:"Exclude Styles"}),(0,i.Y)("textarea",{id:"card-exclude-styles",value:k,onChange:e=>x(e.target.value),placeholder:"Styles to exclude (optional)...",rows:2,className:"focus:border-accent-primary resize-none rounded-md border border-border-primary bg-background-secondary px-3 py-2 text-sm text-foreground-primary placeholder:text-foreground-tertiary focus:outline-none"})]}),!I&&v.trim().length>0&&0===f.length&&(0,i.Y)("p",{className:"text-xs text-accent-error",children:"At least one condition is required to save a card."}),(0,i.FD)("div",{className:"flex justify-end gap-2 pt-2",children:[(0,i.Y)(r.Ay,{variant:r.Ak.Secondary,shape:r.aH.Rounded,size:r.Mp.Small,onClick:M,children:"Cancel"}),(0,i.Y)(r.Ay,{variant:r.Ak.Primary,shape:r.aH.Rounded,size:r.Mp.Small,onClick:S,disabled:!I,children:"Save Card"})]})]})]})}},66273:(e,t,l)=>{l.d(t,{A:()=>r});var i=l(27580),n=l(74616);let r=e=>t=>(t=(0,i.Oe)(t,["global","mode"],n.J1.ADJUST_SPEED),t=(0,i.Oe)(t,[n.J1.ADJUST_SPEED],{clipId:e.id,speedMultiplier:1,keepPitch:!1}))},66358:(e,t,l)=>{l.d(t,{tz:()=>T,Q2:()=>y,Sp:()=>x,kt:()=>Y,eR:()=>C,nd:()=>w,Rc:()=>_,kN:()=>P});var i=l(93519),n=l(81513),r=l(76790),a=l(71555),o=l(15569);let d=()=>e=>{let{menuRef:t,onToggle:l,isOpen:i}=e;return e=>{let n=!0;if("Enter"===e.key)l();else if("Tab"===e.key&&i){var r;let e=null===(r=t.current)||void 0===r?void 0:r.querySelectorAll('[tabindex]:not([tabindex="-1"]');e&&e[0]&&e[0].focus()}else"Escape"===e.key&&i?l():n=!1;n&&(e.stopPropagation(),e.preventDefault())}};var s=l(44034),c=l(4709),u=l(78293);let v=(0,n.A)("div",{target:"e13y1j7e0"})("position:fixed;z-index:100000;padding:8px;overflow-y:auto;"),p=(0,n.A)("div",{target:"e13y1j7e1"})("position:fixed;z-index:-1;background-color:rgba(0,0,0,0.5);top:0;left:0;right:0;bottom:0;backdrop-filter:blur(4px);"),m=(0,n.A)("div",{target:"e13y1j7e2"})("background-color:var(--color-background-tertiary);border-radius:10px;display:flex;flex-direction:column;white-space:nowrap;font-size:12px;box-shadow:0 3px 5px 0 rgba(0,0,0,0.3);overflow:hidden;"),h=(0,n.A)("div",{target:"e13y1j7e3"})("display:contents;> * > span{justify-content:flex-start;font-size:14px;}svg{font-size:16px;flex:0 0 auto;}"),g=(0,n.A)("div",{target:"e13y1j7e4"})("padding:10px 16px;"),f=(0,n.A)("h3",{target:"e13y1j7e5"})("display:flex;align-items:center;justify-content:space-between;color:var(--color-foreground-secondary);"),y=(0,n.A)("div",{target:"e13y1j7e6"})("display:flex;flex-direction:column;align-items:stretch;padding:0;& + &{border-top:1px solid var(--color-border-secondary);}"),C=(0,n.A)("span",{target:"e13y1j7e7"})("font-size:14px;flex-grow:1;text-align:left;margin-right:10px;display:inline-block;"),w=(0,n.A)("span",{target:"e13y1j7e8"})("font-size:12px;color:var(--color-foreground-inactive);text-transform:none;font-family:var(--font-family-serif);margin-bottom:-2px;"),b=(0,c.q6)(()=>{}),A=()=>(0,c.NT)(b),k=e=>{let{children:t,onClose:l}=e;return(0,i.Y)(b.Provider,{value:l,children:t})},x=e=>{let{wrapperClassName:t,...l}=e;return(0,i.Y)(g,{className:(0,o.QP)("bg-quaternary",t),children:(0,i.Y)(f,{...l})})},Y=e=>{let{keepMenusOpen:t,...l}=e,n=A();return(0,i.Y)(h,{className:"context-menu-item",children:(0,i.Y)(u.Ay,{shape:u.aH.Rectangle,...l,tabIndex:0,onClick:l.onClick?function(){for(var e,i=arguments.length,r=Array(i),a=0;a<i;a++)r[a]=arguments[a];t||n(!0),null===(e=l.onClick)||void 0===e||e.call(l,...r)}:void 0})})},S=(0,n.A)("svg",{target:"e13y1j7e9"})("display:block;position:fixed;pointer-events:none;z-index:10000;overflow:visible;path{pointer-events:auto;fill:red;opacity:0;}"),M=e=>{let{mouseoverId:t,menuWrapperRef:l,triggerWrapperRef:n}=e,a=(0,r.useRef)(()=>{}),o=(0,r.useRef)(null),d=(0,r.useRef)(null),s=A(),c=(0,r.useCallback)((e,t,l,i,r)=>{var c,u,v,p;let{left:m,top:h,right:g,bottom:f}=l,y=n.current,C=null==y?void 0:y.getBoundingClientRect();if(!C)return!1;let w=i>C.left&&i<C.right&&r>C.top&&r<C.bottom,b=(m+g)/2,A=(h+f)/2,k=(null!==(v=null===(c=o.current)||void 0===c?void 0:c.x)&&void 0!==v?v:1/0)-b,x=(null!==(p=null===(u=o.current)||void 0===u?void 0:u.y)&&void 0!==p?p:1/0)-A,Y=i-b,S=r-A;if(!(Math.sqrt(Y*Y+S*S)<Math.sqrt(k*k+x*x))&&!w)return!1;o.current={x:i,y:r},w||(d.current&&clearTimeout(d.current),d.current=setTimeout(()=>{d.current=null,e.parentElement&&(e.parentElement.style.display="none"),window.removeEventListener("mousemove",a.current),s()},100));let M=[{x:m,y:h,angle:Math.atan2(h-A,m-b)},{x:g,y:h,angle:Math.atan2(h-A,g-b)},{x:g,y:f,angle:Math.atan2(f-A,g-b)},{x:m,y:f,angle:Math.atan2(f-A,m-b)},{x:i,y:r,angle:Math.atan2(S,Y)}];return M.sort((e,t)=>e.angle-t.angle),(M=M.map(e=>{let l=e.x-b,i=e.x+(l<0?-2:2),n=e.y;return i-=t.left,n-=t.top,{...e,x:i,y:n}})).map((e,t)=>0===t?"M ".concat(e.x," ").concat(e.y):"L ".concat(e.x," ").concat(e.y)).join(" ")+" Z"},[s,n]),u=(0,r.useCallback)(e=>{window.removeEventListener("mousemove",a.current),e&&(a.current=t=>{let i=e.parentElement;if(!i)return;i.setAttribute("viewbox","0 0 ".concat(window.innerWidth," ").concat(window.innerHeight));let n=l.current;if(!n)return;let r=n.getBoundingClientRect();if(r.bottom>window.innerHeight)return;if(t.clientX>r.left&&t.clientX<r.right&&t.clientY>r.top&&t.clientY<r.bottom){let t=e.parentElement;t&&(t.style.display="none"),d.current&&clearTimeout(d.current),window.removeEventListener("mousemove",a.current);return}let o=c(e,e.parentElement.getBoundingClientRect(),r,t.clientX,t.clientY);!1!==o&&e.setAttribute("d",o)},window.addEventListener("mousemove",a.current))},[c]);return(0,r.useEffect)(()=>()=>{window.removeEventListener("mousemove",a.current)},[]),(0,i.Y)(S,{id:(0,r.useId)(),"data-mouseover-id":t,children:(0,i.Y)("path",{ref:u})})},T=(0,r.forwardRef)(function(e,t){let{children:l,placement:n="bottom-left",className:o,clientCoords:d,mouseoverId:c,positionOnMobile:u=!1}=e,h=(0,r.useRef)(null),g=(0,r.useRef)(null),f=!(0,s.Yo)();(0,r.useEffect)(()=>{let e=h.current,t=g.current;if(!e||!t)return;let l=()=>{if(!h.current||!g.current)return;let e=h.current,t=g.current;if(f&&!u){e.style.top="auto",e.style.maxHeight="calc(100vh - 100px)",e.style.left="0",e.style.right="0",e.style.bottom="0",e.style.marginLeft="",e.style.marginTop="";return}let l=0,i=0;if(e.style.top="auto",e.style.left="auto",e.style.right="auto",e.style.bottom="auto",e.style.marginLeft="",e.style.marginTop="",d){void 0!==d.top&&(e.style.top="".concat(d.top,"px")),void 0!==d.left&&(e.style.left="".concat(d.left,"px")),void 0!==d.right&&(e.style.right="".concat(d.right,"px")),void 0!==d.bottom&&(e.style.bottom="".concat(d.bottom,"px"));let t=e.getBoundingClientRect();l=t.top,i=t.left,e.style.top="auto",e.style.left="auto",e.style.right="auto",e.style.bottom="auto"}else{let r=t.parentElement;if(!r)return;let a=r.getBoundingClientRect(),o=e.offsetWidth,d=e.offsetHeight,s=n;"right"===n&&a.right+o>window.innerWidth?s="left":"left"===n&&a.left-o<0&&(s="right"),"bottom-left"===s?(l=a.bottom,i=a.right-o):"bottom-right"===s?(l=a.bottom,i=a.left):"top-left"===s?(l=a.top-d,i=a.right-o):"top-right"===s?(l=a.top-d,i=a.left):"top-middle"===s?(l=a.top-d,i=a.left+a.width/2-o/2):"bottom-middle"===s?(l=a.bottom,i=a.left+a.width/2-o/2):"left"===s?(l=a.top,i=a.left-o):"right"===s&&(l=a.top,i=a.right)}let r=e.getBoundingClientRect(),a=window.innerWidth,o=window.innerHeight,s=l,c=i;r.height>0?s<10?s=10:s+r.height>o-10&&(s=Math.max(10,o-10-r.height)):isNaN(s)&&(s=10),r.width>0?c<10?c=10:c+r.width>a-10&&(c=Math.max(10,a-10-r.width)):isNaN(c)&&(c=10),e.style.top="".concat(s,"px"),e.style.left="".concat(c,"px"),e.style.right="auto",e.style.bottom="auto",e.style.marginLeft="",e.style.marginTop="",e.style.maxHeight="".concat(window.innerHeight-20,"px")},i=requestAnimationFrame(l),r=new ResizeObserver(()=>{requestAnimationFrame(l)});return e&&r.observe(e),window.addEventListener("resize",l),window.addEventListener("scroll",l,!0),()=>{cancelAnimationFrame(i),e&&r.unobserve(e),r.disconnect(),window.removeEventListener("resize",l),window.removeEventListener("scroll",l,!0)}},[d,n,f]);let y=(0,r.useCallback)(e=>{t&&("function"==typeof t?t(e):t.current=e),h.current=e},[t]),C=A();return(0,i.Y)("div",{ref:g,className:"relative h-0 w-0",onContextMenu:e=>e.stopPropagation(),children:(0,a.createPortal)((0,i.Y)(i.FK,{children:(0,i.FD)(v,{"data-mouseover-id":c,ref:y,"data-context-menu":!0,children:[f&&(0,i.Y)(p,{onClick:()=>C()}),(0,i.Y)(m,{className:o,children:l})]})}),document.body)})}),I=function(){let{openOnMouseOver:e=!1,onOpenChange:t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},[l,i]=(0,r.useState)(!1),n=(0,r.useCallback)(e=>{i(e),null==t||t(e)},[t]),a=!(0,s.Yo)();(0,r.useEffect)(()=>{if(l&&!a){let e=e=>{"Escape"===e.key&&n(!1)},t=e=>{if(e.target instanceof HTMLElement||e.target instanceof SVGElement){if(e.target.closest("[data-context-menu]"))return;let t=e.target.closest("[data-context-menu-trigger]");if(t){if(t.getAttribute("data-button-id")===u)return;n(!1);return}}n(!1)};return setTimeout(()=>{window.addEventListener("keydown",e,{capture:!0}),window.addEventListener("mousedown",t,{capture:!0})},0),()=>{window.removeEventListener("keydown",e,{capture:!0}),window.removeEventListener("mousedown",t,{capture:!0})}}},[l,a]);let o=(0,r.useId)();(0,r.useEffect)(()=>{if(!e||!l||a)return;let t=e=>{e.target instanceof HTMLElement&&(e.target.closest("[data-mouseover-id=".concat(o,"]"))?n(!0):n(!1))};return window.addEventListener("mousemove",t),()=>{window.removeEventListener("mousemove",t)}},[e,l,a]);let d=(0,r.useRef)(null),c=(0,r.useRef)(null),u=(0,r.useId)(),v=A();return{menuWrapperRef:d,triggerWrapperRef:c,buttonId:u,handleClose:(0,r.useCallback)(e=>{n(!1),e&&v(!0)},[n,v]),mouseoverId:o,updateMenuOpen:n,menuOpen:l}},_=e=>{var t;let{title:l,ButtonComponent:n,ContentsComponent:o,className:c="",menuClassName:u="",placement:v="bottom-left",onOpenChange:p,openOnMouseOver:m,positionOnMobile:h=!1}=e,{menuWrapperRef:g,triggerWrapperRef:f,buttonId:y,handleClose:C,mouseoverId:w,updateMenuOpen:b,menuOpen:A}=I({openOnMouseOver:m,onOpenChange:p}),Y=!(0,s.Yo)(),S=d();return(0,i.FD)("div",{className:c||"relative",ref:f,children:[n({"data-button-id":y,"data-mouseover-id":w,"data-context-menu-trigger":!0,onKeyDown:S({menuRef:g,onToggle:(0,r.useCallback)(()=>b(!A),[A]),isOpen:A}),onClick:e=>e.stopPropagation(),onMouseDown:e=>{e.stopPropagation(),0===e.button&&b(!A)},onMouseOver:()=>{m&&b(!0)}},A),A&&(0,i.FD)(k,{onClose:C,children:[m&&!Y&&(0,a.createPortal)((0,i.Y)(M,{triggerWrapperRef:f,menuWrapperRef:g,mouseoverId:w}),null!==(t=document.body.querySelector('[data-button-id="'.concat(y,'"]')))&&void 0!==t?t:f.current),(0,i.FD)(T,{className:u,mouseoverId:w,positionOnMobile:h,placement:v,ref:g,children:[l&&(0,i.Y)(x,{onClose:C,children:l}),(0,i.Y)(o,{onClose:C})]})]})]})},P=e=>{var t,l,n,a;let{children:o,ContentsComponent:d,title:s}=e,{menuWrapperRef:c,triggerWrapperRef:u,handleClose:v,mouseoverId:p,updateMenuOpen:m,menuOpen:h}=I(),g=(0,r.useRef)(null);return d?(0,i.FD)("div",{ref:u,onContextMenu:e=>{e.preventDefault(),g.current={x:e.clientX,y:e.clientY},m(!0)},children:[o,h&&(0,i.Y)(k,{onClose:v,children:(0,i.FD)(T,{mouseoverId:p,placement:"bottom-right",clientCoords:{top:null!==(n=null===(t=g.current)||void 0===t?void 0:t.y)&&void 0!==n?n:0,left:null!==(a=null===(l=g.current)||void 0===l?void 0:l.x)&&void 0!==a?a:0},ref:c,children:[s&&(0,i.Y)(x,{onClose:v,children:s}),(0,i.Y)(d,{onClose:v})]})})]}):o}},66507:(e,t,l)=>{l.d(t,{$:()=>i});async function i(e,t){try{let l=await e.GET("/api/billing/download-usage",{params:{query:t?{clip_id:t}:{}}});if(!l.data)throw Error("No download usage data received");let{downloads_used:i,downloads_limit:n,downloads_remaining:r,has_unlimited_downloads:a,clip_owned_by_user:o=!1}=l.data;return{canDownload:o||a||r>0,downloadsUsed:i,downloadsLimit:n,downloadsRemaining:r,hasUnlimitedDownloads:a,clipOwnedByUser:o}}catch(e){return console.error("Failed to check download quota:",e),{canDownload:!0,downloadsUsed:0,downloadsLimit:0,downloadsRemaining:999,hasUnlimitedDownloads:!1,clipOwnedByUser:!1}}}},67013:(e,t,l)=>{l.d(t,{c:()=>a,g:()=>o});var i=l(93519),n=l(76790);let r=(0,n.createContext)(null);function a(e){let{children:t}=e,l=(0,n.useRef)(new Set),[a,o]=(0,n.useState)(null),d=(0,n.useCallback)(e=>{let t=!l.current.has(e);return t&&l.current.add(e),t},[]),s=(0,n.useCallback)(()=>{l.current.clear(),o(null)},[]),c=(0,n.useMemo)(()=>({markClipPlayedAndCheckIfFirst:d,resetSession:s,currentlyPlayingClipId:a,setCurrentlyPlayingClipId:o}),[d,s,a]);return(0,i.Y)(r.Provider,{value:c,children:t})}function o(){return(0,n.useContext)(r)}},69163:(e,t,l)=>{l.d(t,{tJ:()=>tw,m4:()=>tx,NP:()=>tA,M3:()=>tc,OV:()=>tC,vs:()=>tQ,ID:()=>tW,B1:()=>tr,RY:()=>tD,lu:()=>ty,aG:()=>t_,P0:()=>tI,h5:()=>ts,G:()=>tp,KM:()=>t7,$7:()=>t2,I4:()=>tH,J_:()=>tV,Sw:()=>tj,LG:()=>tz,aZ:()=>tU,My:()=>tu,Xt:()=>tG,Nm:()=>tT,oj:()=>tf,Ab:()=>tb,ar:()=>tO,_J:()=>le,wE:()=>tv,OA:()=>t9,eK:()=>t4,N5:()=>t8,MK:()=>t6,mn:()=>t$,z9:()=>tY,kv:()=>tk,Or:()=>t3,Z1:()=>td,CS:()=>ta,ZJ:()=>to,tA:()=>tZ,ZR:()=>tS,lU:()=>t1,kd:()=>t5,xC:()=>tm,ai:()=>tN,BZ:()=>tF,kZ:()=>tP,is:()=>t0,_D:()=>th,VW:()=>tR,M6:()=>tJ,KF:()=>tE,kE:()=>tL,CQ:()=>tK,xE:()=>tM,V9:()=>tX,dU:()=>tB,Bl:()=>tq,Ss:()=>tn});var i=l(93519),n=l(81513),r=l(71756),a=l(12358),o=l(3372),d=l(76790),s=l(2689),c=l(15569),u=l(52471);let v=e=>{let{className:t}=e;return(0,i.FD)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 12 12",fill:"currentColor",className:null!=t?t:"",children:[(0,i.Y)("path",{d:"M5.50022 3C5.50022 3.55228 5.05249 4 4.50018 4C3.94788 4 3.50014 3.55228 3.50014 3C3.50014 2.44772 3.94788 2 4.50018 2C5.05249 2 5.50022 2.44772 5.50022 3Z"}),(0,i.Y)("path",{d:"M5.50022 9C5.50022 9.55229 5.05249 10 4.50018 10C3.94788 10 3.50014 9.55229 3.50014 9C3.50014 8.44771 3.94788 8 4.50018 8C5.05249 8 5.50022 8.44771 5.50022 9Z"}),(0,i.Y)("path",{d:"M3.50014 6C3.50014 6.55228 3.05241 7 2.5001 7C1.94779 7 1.50006 6.55228 1.50006 6C1.50006 5.44772 1.94779 5 2.5001 5C3.05241 5 3.50014 5.44772 3.50014 6Z"}),(0,i.Y)("path",{d:"M7.5003 6C7.5003 6.82843 6.8287 7.5 6.00024 7.5C5.17178 7.5 4.50018 6.82843 4.50018 6C4.50018 5.17157 5.17178 4.5 6.00024 4.5C6.8287 4.5 7.5003 5.17157 7.5003 6Z"}),(0,i.Y)("path",{d:"M6.50026 0.5C6.50026 0.776142 6.2764 1 6.00024 1C5.72409 1 5.50022 0.776142 5.50022 0.5C5.50022 0.223858 5.72409 0 6.00024 0C6.2764 0 6.50026 0.223858 6.50026 0.5Z"}),(0,i.Y)("path",{d:"M9.18329 1.48685C9.04522 1.72599 8.73941 1.80793 8.50025 1.66986C8.2611 1.53179 8.17916 1.22599 8.31723 0.986846C8.45531 0.747699 8.76112 0.665762 9.00027 0.803833C9.23943 0.941904 9.32137 1.2477 9.18329 1.48685Z"}),(0,i.Y)("path",{d:"M11.0132 3.68292C10.7741 3.82099 10.4683 3.73905 10.3302 3.49991C10.1921 3.26076 10.2741 2.95497 10.5132 2.81689C10.7524 2.67882 11.0582 2.76076 11.1963 2.99991C11.3343 3.23905 11.2524 3.54485 11.0132 3.68292Z"}),(0,i.Y)("path",{d:"M11.5 6.49976C11.2238 6.49976 11 6.2759 11 5.99976C11 5.72361 11.2238 5.49976 11.5 5.49976C11.7761 5.49976 12 5.72361 12 5.99976C12 6.2759 11.7761 6.49976 11.5 6.49976Z"}),(0,i.Y)("path",{d:"M10.5132 9.18255C10.2741 9.04448 10.1921 8.73869 10.3302 8.49954C10.4683 8.2604 10.7741 8.17846 11.0132 8.31653C11.2524 8.4546 11.3343 8.7604 11.1963 8.99954C11.0582 9.23869 10.7524 9.32062 10.5132 9.18255Z"}),(0,i.Y)("path",{d:"M8.31693 11.0125C8.17885 10.7734 8.26079 10.4676 8.49995 10.3295C8.73911 10.1915 9.04491 10.2734 9.18299 10.5125C9.32107 10.7517 9.23913 11.0575 8.99997 11.1956C8.76081 11.3336 8.45501 11.2517 8.31693 11.0125Z"}),(0,i.Y)("path",{d:"M6.50026 11.5C6.50026 11.7761 6.2764 12 6.00024 12C5.72409 12 5.50022 11.7761 5.50022 11.5C5.50022 11.2239 5.72409 11 6.00024 11C6.2764 11 6.50026 11.2239 6.50026 11.5Z"}),(0,i.Y)("path",{d:"M3.68307 11.0132C3.54499 11.2523 3.23919 11.3342 3.00003 11.1962C2.76087 11.0581 2.67893 10.7523 2.81701 10.5132C2.95509 10.274 3.26089 10.1921 3.50005 10.3301C3.73921 10.4682 3.82115 10.774 3.68307 11.0132Z"}),(0,i.Y)("path",{d:"M1.48697 9.18298C1.24781 9.32105 0.942006 9.23911 0.803929 8.99997C0.665852 8.76082 0.747793 8.45503 0.986949 8.31696C1.22611 8.17888 1.53191 8.26082 1.66999 8.49997C1.80807 8.73911 1.72613 9.04491 1.48697 9.18298Z"}),(0,i.Y)("path",{d:"M0.50002 6.5C0.223867 6.5 -7.1274e-09 6.27614 0 6C7.1274e-09 5.72386 0.223867 5.5 0.50002 5.5C0.776174 5.5 1.00004 5.72386 1.00004 6C1.00004 6.27614 0.776174 6.5 0.50002 6.5Z"}),(0,i.Y)("path",{d:"M0.986949 3.68298C0.747793 3.54491 0.665852 3.23911 0.803929 2.99997C0.942006 2.76082 1.24781 2.67888 1.48697 2.81696C1.72613 2.95503 1.80807 3.26082 1.66999 3.49997C1.53191 3.73911 1.22611 3.82105 0.986949 3.68298Z"}),(0,i.Y)("path",{d:"M2.81719 1.48685C2.67912 1.2477 2.76106 0.941907 3.00021 0.803835C3.23937 0.665764 3.54518 0.747702 3.68326 0.986848C3.82133 1.22599 3.73939 1.53179 3.50024 1.66986C3.26108 1.80793 2.95527 1.72599 2.81719 1.48685Z"}),(0,i.Y)("path",{d:"M8.50035 3C8.50035 3.55228 8.05261 4 7.5003 4C6.948 4 6.50026 3.55228 6.50026 3C6.50026 2.44772 6.948 2 7.5003 2C8.05261 2 8.50035 2.44772 8.50035 3Z"}),(0,i.Y)("path",{d:"M8.50035 9C8.50035 9.55229 8.05261 10 7.5003 10C6.948 10 6.50026 9.55229 6.50026 9C6.50026 8.44771 6.948 8 7.5003 8C8.05261 8 8.50035 8.44771 8.50035 9Z"}),(0,i.Y)("path",{d:"M10.5004 6C10.5004 6.55228 10.0527 7 9.50039 7C8.94808 7 8.50035 6.55228 8.50035 6C8.50035 5.44772 8.94808 5 9.50039 5C10.0527 5 10.5004 5.44772 10.5004 6Z"})]})};var p=l(6696),m=l(66009),h=l(48971),g=l(21030),f=l(74616),y=l(81218),C=l(4709);function w(e){let t=(0,y.TF)(),l=(0,C.i7)(g.Ay,e=>e.setState);return(0,d.useCallback)(()=>{l(e(t))},[t,l])}var b=l(75897),A=l(95591),k=l(86688),x=l(37412),Y=l(52478),S=l(57575),M=l(77310),T=l(70635),I=l(62972),_=l(93439),P=l(66028),N=l(68835);let F=()=>{let{session:e}=(0,u.gy)(),{openModalWithData:t}=(0,I.k)();return(0,d.useCallback)(()=>!(0,N.cA)(e,P.s$.GetStems)&&(t(k.H.UPSELL_MODAL,{feature:P.m.STEMS}),!0),[t,e])};var E=l(44034),L=l(2598),D=l(44258),O=l(98150),R=l(81182),q=l(21810),B=l(26850);async function H(e,t,l){try{null==l||l();let i=await (0,B.L)(e,t.id);if(!i||0===i.length||!i.some(e=>{var t;return(null===(t=e.notes)||void 0===t?void 0:t.length)>0}))return{success:!1,error:"No transcribable notes found in this clip."}}catch(e){var i;if(null===(i=e.message)||void 0===i?void 0:i.includes("Permission denied"))return{success:!1,error:"MIDI transcription requires a Premier subscription."};if("Timeout"===e.message)return{success:!1,error:"MIDI generation timed out. Please try again."};return{success:!1,error:"Failed to generate MIDI transcription."}}let{data:n,error:r,response:a}=await e.GET("/api/gen/{clip_id}/musicxml/",{params:{path:{clip_id:t.id}},parseAs:"blob"});if(403===a.status)return{success:!1,error:"You do not have access to download sheet music."};if(404===a.status)return{success:!1,error:"Failed to convert MIDI to sheet music."};if(r||!n)return{success:!1,error:"Failed to generate sheet music."};let o=URL.createObjectURL(n),d=document.createElement("a");return d.href=o,d.download="".concat(t.title||"untitled",".musicxml"),document.body.appendChild(d),d.click(),document.body.removeChild(d),URL.revokeObjectURL(o),{success:!0}}var U=l(55840),V=l(39025),j=l(19669),z=l(13730),G=l(5899),J=l(32017),Q=l(93855),W=l(55554),Z=l(38854),K=l(53899),X=l(38411),$=l(33935),ee=l(51278),et=l(8578),el=l(78373),ei=l(97552),en=l(75287),er=l(52439),ea=l(27279),eo=l(99389),ed=l(58857),es=l(69913),ec=l(24501),eu=l(37461),ev=l(49875),ep=l(73167),em=l(76909),eh=l(94825),eg=l(94602),ef=l(10890),ey=l(70441),eC=l(2303),ew=l(4e3),eb=l(72314),eA=l(20903),ek=l(254),ex=l(31117),eY=l(50377),eS=l(76619),eM=l(15627),eT=l(85107),eI=l(49016),e_=l(33642),eP=l(1838),eN=l(54554),eF=l(72333),eE=l(62727),eL=l(53897),eD=l(42078),eO=l(66507);let eR=async(e,t,l,i,n,r,a,o,d)=>{var s,c,u,v,p,m,h,g,f,y,C;if(r.getExperiment("download_gating").get("enable-download-gating",!1))try{let i=await (0,eO.$)(a,e.id);if(i.clipOwnedByUser){o();return}let n=await a.GET("/api/clips/{clip_id}/commercial_rights_eligible/",{params:{path:{clip_id:e.id}}});if(!(null===(C=n.data)||void 0===C?void 0:C.eligible)){if((0,N.LC)(l)){o();return}t.openCommercialRightsModal(e.id,o);return}if((0,N.LC)(l)&&e.user_id===l.userId){t.openCommercialRightsModal(e.id,o);return}if(!(0,N.LC)(l)){t.openCommercialRightsModal(e.id,i.canDownload?o:()=>{});return}}catch(e){}(null===(s=e.metadata)||void 0===s?void 0:s.is_remix)&&(null===(u=i.parentClipByClipId)||void 0===u?void 0:null===(c=u[null==e?void 0:e.id])||void 0===c?void 0:c.user_handle)&&(null===(p=i.parentClipByClipId)||void 0===p?void 0:null===(v=p[null==e?void 0:e.id])||void 0===v?void 0:v.user_handle)!==(null===(m=l.user)||void 0===m?void 0:m.handle)?d.renderRemixModal(o):null===(h=l.experiments)||void 0===h||!h[eD.az6]||(null===(g=e.metadata)||void 0===g?void 0:g.priority)===eD.tuY.Pro||(null===(f=l.roles)||void 0===f?void 0:f.pro)||(null===(y=l.flags)||void 0===y?void 0:y["skip-paywall"])?o():d.renderUpgradeModal(()=>{o(),(0,q.Ay)({actionName:"MakeDownloadUpgradeModalSelection",context:{selection:"download"}})},()=>{n.push("/account"),(0,q.Ay)({actionName:"MakeDownloadUpgradeModalSelection",context:{selection:"upgrade"}})},()=>{(0,q.Ay)({actionName:"DismissDownloadUpgradeModal",context:{}})})};var eq=l(99590),eB=l(16577),eH=l(80336),eU=l(56090),eV=l(78293),ej=l(66358),ez=l(1452),eG=l(40949),eJ=l(12581),eQ=l(70626);let eW=e=>{let{content:t,onUndo:l,onClose:n}=e,[r,a]=(0,d.useState)(!1);return!r&&(0,i.FD)("div",{className:"flex items-center justify-between rounded-md bg-dumbo-900 p-2 font-sans text-foreground-primary-on-light",children:[(0,i.Y)("p",{children:(0,i.Y)("span",{className:"font-bold",children:t})}),(0,i.FD)("div",{className:"flex items-center",children:[(0,i.Y)("button",{onClick:()=>{a(!0),l()},className:"mx-2 rounded-full border border-background-primary px-4 py-1 text-sm transition-colors duration-200 hover:bg-background-primary hover:text-foreground-primary",children:"Undo"}),n&&(0,i.Y)(eQ.J,{onClick:n})]})]})};var eZ=l(61183),eK=l(66273),eX=l(48917),e$=l(10575),e0=l(5663),e1=l(58110),e2=l(23366),e5=l(85667);let e7=()=>"complete"===(0,y.TF)().status;var e3=l(70112),e9=l(81779),e4=l(28394);let e6=(0,n.A)("div",{target:"e1ntvsr90"})("display:flex;flex-direction:column;gap:1rem;padding:1rem;text-align:center;"),e8=(0,n.A)("span",{target:"e1ntvsr91"})(),te=(0,n.A)("span",{target:"e1ntvsr92"})("font-weight:bold;"),tt=(0,n.A)("a",{target:"e1ntvsr93"})("text-decoration:underline;"),tl=e=>{let{clip:t,session:l}=e;return(null==t?void 0:t.persona)&&(t.persona.is_public&&t.is_public||t.user_id===(null==l?void 0:l.userId))},ti=e=>{let{clip:t,session:l}=e;return(0,eE.QU)(t)&&(tl(e)||(null==t?void 0:t.user_id)===(null==l?void 0:l.userId))},tn=async(e,t,l,n,r,a,o,d)=>{await eR(e,t,l,n,r,a,o,d,{renderRemixModal:e=>{t.openConfirmationModal({title:"You do not have commercial\nrights to this song",renderMessage:()=>(0,i.FD)(e6,{children:[(0,i.FD)(e8,{children:["Creating a Remix of another user's song does not grant commercial rights to that output. Please see our"," ",(0,i.Y)(te,{children:"Terms of Service"})," ","for more information."]}),(0,i.Y)(e8,{children:(0,i.Y)(tt,{href:"/legal/terms",target:"_blank",children:"Terms of Service"})})]}),onConfirmFn:()=>{},onActionFn:()=>{e()},onCloseFn:()=>{},confirmButtonText:"Cancel",actionButtonText:"Download Anyway",actionButtonClassName:"bg-none before:bg-none bg-accent-brand before:bg-accent-brand text-gray-50",icon:U.A})},renderUpgradeModal:(e,l,n)=>{t.openConfirmationModal({title:"Need commercial rights?",renderMessage:()=>(0,i.FD)(e6,{children:[(0,i.FD)(e8,{children:["Only ",(0,i.Y)(te,{children:"Pro"})," and"," ",(0,i.Y)(te,{children:"Premier"})," songs are eligible for commercial use."]}),(0,i.FD)(e8,{children:[(0,i.Y)(te,{children:"Upgrade now"})," and this song will be upgraded too."]}),(0,i.Y)(e8,{children:(0,i.Y)(tt,{href:"https://help.suno.com/en/categories/550145-rights-ownership",target:"_blank",children:"Rights and Ownership FAQs"})})]}),onConfirmFn:e,onActionFn:l,onCloseFn:n,confirmButtonText:"Download Anyway",actionButtonText:"Upgrade"})}})},tr=e=>{let{keepMenusOpen:t,enableForIncompleteClips:l,renderTags:n,children:r,...a}=e;if(!(0,y.Qe)())throw Error("ClipMenuItem must be rendered in a ClipContext");let o=e7(),d=a.disabled||!l&&!o;return a.onClick||a.href?(0,i.Y)(ej.kt,{keepMenusOpen:t,variant:eV.Ak.Tertiary,...a,"aria-label":"string"==typeof r?r:void 0,className:(0,c.QP)("w-full flex-grow-1 !bg-transparent py-2 pr-4 pl-2.5 hover:bg-background-secondary",a.className,"context-menu-button"),disabled:d,children:n?(0,i.FD)("div",{className:"flex w-full items-center justify-between",children:[(0,i.Y)("span",{className:"truncate",children:r}),n()]}):r}):(0,i.Y)(T.m,{label:"Not yet implemented!",children:(0,i.Y)(ej.kt,{keepMenusOpen:t,...a,className:"w-full flex-grow-1 py-2 pr-4 pl-2.5 text-accent-error-on-primary ".concat(a.className," context-menu-button"),disabled:d,children:(0,i.FD)("div",{className:"flex w-full items-center justify-between",children:[(0,i.Y)("span",{className:"truncate",children:r}),n&&n()]})})})},ta=()=>{var e;let t=(0,y.TF)(),{session:l,edit:n}=(0,u.gy)(),{openModalWithData:r}=(0,I.k)(),a=(0,o.useRouter)(),d=(0,o.usePathname)(),s=!(0,E.Yo)();return(null==t?void 0:t.is_trashed)||!l.isStaff&&(null===(e=l.user)||void 0===e?void 0:e.id)!==(null==t?void 0:t.user_id)||s?null:(0,i.Y)(tr,{icon:(0,i.Y)(V.A,{}),onClick:(0,q.c)({actionName:"SongMenuEditClicked",context:{clipId:null==t?void 0:t.id}},()=>{if(!(0,N.cA)(l,P.s$.EditMode)){r(k.H.UPSELL_MODAL,{feature:P.m.SONG_EDITOR});return}if(n.setExitEditModeCallback(()=>{a.push(d)}),(0,N.m2)(l)){var e;window.location.href="/edit/".concat(t.id,"?wid=").concat((null===(e=t.project)||void 0===e?void 0:e.id)||"default")}else window.location.href="/edit/".concat(t.id)}),"aria-label":"Open in Editor",renderTags:()=>(0,i.Y)(S.Ay,{className:"ml-2",variant:S.qs.Pro,children:"Pro"}),children:"Open in Editor"})},to=()=>{let e=(0,y.TF)(),{session:t}=(0,u.gy)(),{openModalWithData:l}=(0,I.k)(),n=t.flags&&!!t.flags.studio,r=!(0,E.Yo)();return!n||r?null:(0,i.Y)(tr,{icon:(0,i.Y)(j.A,{}),onClick:()=>{if(!(0,N.cA)(t,P.s$.Studio)){l(k.H.UPSELL_MODAL,{feature:P.m.STUDIO});return}window.location.href="/studio?for_clip_id=".concat(e.id),(0,q.Ay)({actionName:"NavigatedToStudio",context:{trigger:"song_menu_edit_in_studio"}})},"aria-label":"Open in Studio",renderTags:()=>(0,i.Y)(S.Ay,{className:"ml-2",variant:S.qs.New,children:"New"}),children:"Open in Studio"})},td=()=>{let e=(0,y.TF)(),t=(0,o.useRouter)(),{isControlGroup:l}=(0,p.a)(),n=(0,d.useCallback)(()=>{t.push("/chat?mode=chat&ref_id=".concat(e.id,"&ref_type=clip"))},[e.id,t]);return l?null:(0,i.Y)(tr,{icon:(0,i.Y)(v,{}),onClick:n,"aria-label":"Open in Chat",renderTags:()=>(0,i.Y)(S.Ay,{className:"ml-2",variant:S.qs.Aura,children:"Beta"}),children:"Open in Chat"})},ts=()=>{let e=(0,y.TF)(),{genForm:t,project:l}=(0,u.gy)(),n=(0,o.useRouter)(),r=(0,o.usePathname)(),a=(0,eG.eX)(),[s,c]=(0,C.i7)(g.Ay,e=>e.selectState(["global","mode"])),v=(0,C.i7)(g.Ay,e=>e.addCondition),p=(0,d.useCallback)(async()=>{await l.setCurrentProjectToClipProject(e),"/create"!==r&&"/studio"!==r?(s===f.J1.CHAT&&c(f.J1.CUSTOM),n.push("/create?remix_clip="+e.id+"&remix_type=cover")):"/create"===r&&s===f.J1.CHAT&&c(f.J1.CUSTOM),t.shouldOpenMobileCreate=!0,await v(e.id,g.$X.COVER),a()},[e,a,v,t,r,l,n,s,c]);return(0,i.Y)(tr,{icon:(0,i.Y)(z.A,{}),onClick:(0,q.c)({actionName:"SongMenuRemixCoverClicked",context:{clipId:null==e?void 0:e.id}},p),"aria-label":"Cover song",children:"Cover"})},tc=()=>{let e=(0,y.TF)(),t=(0,r.useGateValue)("stack-ui"),l=(0,eG.eX)(),n=(0,C.i7)(g.Ay,e=>e.state.global.mode),a=(0,C.i7)(g.Ay,e=>e.addStackedCondition),o=(0,d.useCallback)(()=>{var t;let i=null===(t=e.metadata)||void 0===t?void 0:t.duration;a(e.id,"cover",i),l(),(0,q.Ay)({actionName:"SongMenuAddToStackClicked",context:{clipId:null==e?void 0:e.id}})},[e,a,l]);return t&&n===f.J1.STACK?(0,i.Y)(tr,{icon:(0,i.Y)(G.A,{}),onClick:o,"aria-label":"Add to Stack",children:"Add to Stack"}):null},tu=()=>{let e=(0,y.TF)(),{genForm:t,project:l}=(0,u.gy)(),n=(0,o.useRouter)(),r=(0,o.usePathname)(),a=(0,eG.eX)(),[s,c]=(0,C.i7)(g.Ay,e=>e.selectState(["global","mode"])),v=(0,C.i7)(g.Ay,e=>e.addCondition),p=(0,d.useCallback)(async()=>{await l.setCurrentProjectToClipProject(e),"/create"!==r&&"/studio"!==r?(s===f.J1.CHAT&&c(f.J1.CUSTOM),n.push("/create?remix_clip="+e.id+"&remix_type=extend")):"/create"===r&&s===f.J1.CHAT&&c(f.J1.CUSTOM),t.shouldOpenMobileCreate=!0,await v(e.id,g.$X.EXTEND),a()},[e,a,v,t,r,l,n,s,c]);return(0,i.Y)(tr,{icon:(0,i.Y)(J.A,{}),onClick:(0,q.c)({actionName:"SongMenuRemixExtendClicked",context:{clipId:null==e?void 0:e.id}},p),"aria-label":"Extend",children:"Extend"})},tv=()=>{let e=(0,y.TF)(),{genForm:t,project:l,session:n}=(0,u.gy)(),a=(0,o.useRouter)(),s=(0,o.usePathname)(),c=(0,eG.eX)(),v=(0,r.useGateValue)("mashup-ui"),p=(0,r.useGateValue)("sample"),m=(0,r.useGateValue)("multi-sample"),[h,w]=(0,C.i7)(g.Ay,e=>e.selectState(["global","mode"])),[,b]=(0,C.i7)(g.Ay,e=>e.selectState(["global","model"])),A=(0,C.i7)(g.Ay,e=>e.addMashupClips),k=(0,d.useCallback)(async()=>{if(await l.setCurrentProjectToClipProject(e),"/create"!==s&&"/studio"!==s){h===f.J1.CHAT&&w(f.J1.CUSTOM),a.push("/create?remix_clip="+e.id+"&remix_type=mashup");return}h===f.J1.CHAT&&w(f.J1.CUSTOM),t.shouldOpenMobileCreate=!0,A([e.id]);let i=(0,N.LC)(n)?eU.gF:eU.DQ;(0,eU.v1)(n.billingModels,i)&&b(i),c()},[e,c,A,t,s,l,a,h,w,b,n]);return v?(0,i.Y)(tr,{icon:(0,i.Y)(Q.A,{}),onClick:(0,q.c)({actionName:"SongMenuMashupClicked",context:{clipId:null==e?void 0:e.id}},k),"aria-label":"Mashup",renderTags:p||m?void 0:()=>(0,i.Y)(S.Ay,{className:"ml-2",variant:S.qs.Aura,children:"Beta"}),children:"Mashup"}):null},tp=()=>{let e=(0,y.TF)(),{session:t}=(0,u.gy)(),{openModalWithData:l}=(0,I.k)();return(0,E.Yo)()?(0,i.Y)(tr,{icon:(0,i.Y)(W.A,{}),onClick:(0,q.c)({actionName:"SongMenuCropSongClicked",context:{clipId:null==e?void 0:e.id}},()=>{if(!(0,N.cA)(t,P.s$.EditMode)){l(k.H.UPSELL_MODAL,{feature:P.m.CROP_FADE});return}window.location.href="/edit/".concat(e.id)}),renderTags:()=>(0,i.Y)(S.Ay,{className:"ml-2",variant:S.qs.Pro,children:"Pro"}),children:"Crop"}):null},tm=()=>{var e;let t=(0,y.TF)(),{session:l}=(0,u.gy)(),{openModalWithData:n}=(0,I.k)();return(0,E.Yo)()?(0,i.Y)(tr,{icon:(0,i.Y)(Z.A,{}),onClick:(0,q.c)({actionName:"SongMenuReplaceSectionClicked",context:{clipId:null==t?void 0:t.id}},()=>{if(!(0,N.cA)(l,P.s$.EditMode)){n(k.H.UPSELL_MODAL,{feature:P.m.REPLACE_SECTION});return}window.location.href="/edit/".concat(t.id)}),renderTags:()=>(0,i.Y)(S.Ay,{className:"ml-2",variant:S.qs.Pro,children:"Pro"}),disabled:!(null==t?void 0:null===(e=t.metadata)||void 0===e?void 0:e.duration),children:"Replace Section"}):null},th=()=>{let e=(0,y.TF)(),{genForm:t}=(0,u.gy)(),l=(0,o.useRouter)(),n=(0,o.usePathname)(),r=w(e$.A),a=(0,eG.eX)(),[d,s]=(0,C.i7)(g.Ay,e=>e.selectState(["global","mode"]));return(0,i.Y)(tr,{icon:(0,i.Y)(K.A,{}),onClick:(0,q.c)({actionName:"SongMenuRemixUseStylesLyricsClicked",context:{clipId:null==e?void 0:e.id}},()=>{"/create"!==n&&"/studio"!==n?(d===f.J1.CHAT&&s(f.J1.CUSTOM),l.push("/create?remix_clip="+e.id+"&remix_type=reuse")):"/create"===n&&d===f.J1.CHAT&&s(f.J1.CUSTOM),t.shouldOpenMobileCreate=!0,r(),a()}),"aria-label":"Reuse styles and lyrics",enableForIncompleteClips:!0,children:"Use Styles & Lyrics"})},tg=["stem_condition","cover_stem_condition","artist_stem_condition"],tf=()=>{var e,t,l,n,r;let a=(0,y.TF)(),{clips:s,project:c,session:v}=(0,u.gy)(),p=(0,C.i7)(e5.vJ,e=>e.clipCreated),m=(0,o.usePathname)(),[h,w]=(0,C.i7)(g.Ay,e=>e.selectState(["global","mode"])),b=tg.includes(null!==(r=null===(e=a.metadata)||void 0===e?void 0:e.task)&&void 0!==r?r:""),A=(0,d.useCallback)(async()=>{let e;if((0,N.m2)(v)&&await c.setCurrentProjectToClipProject(a),"/create"===m&&h===f.J1.CHAT&&w(f.J1.CUSTOM),b)e=await s.runSum(a.id);else{var t,l;e=await s.runConcat(a.id,!!(null===(t=a.metadata)||void 0===t?void 0:t.infill),{editSessionId:null===(l=a.metadata)||void 0===l?void 0:l.edit_session_id})}e&&p(e)},[a,s,c,v,p,m,h,w,b]),k=!(0,eE.QU)(a),x=(null==v?void 0:null===(t=v.user)||void 0===t?void 0:t.id)!==(null==a?void 0:a.user_id),Y=(null==a?void 0:null===(l=a.metadata)||void 0===l?void 0:l.type)==="stem",S=e7(),M=!b&&!(null==a?void 0:null===(n=a.metadata)||void 0===n?void 0:n.history);return k||x||M||Y?null:(0,i.Y)(tr,{icon:(0,i.Y)(X.A,{}),disabled:!S,onClick:(0,q.c)({actionName:"SongMenuGetWholeSongClicked",context:{clipId:null==a?void 0:a.id}},A),"aria-label":"Get full song",enableForIncompleteClips:!0,children:"Get Full Song"})},ty=()=>{var e;let t=(0,y.TF)(),{clips:l,project:n,session:r}=(0,u.gy)(),a=(0,o.usePathname)(),s=(0,C.i7)(e5.vJ,e=>e.clipCreated),[c,v]=(0,C.i7)(g.Ay,e=>e.selectState(["global","mode"])),p=e7(),m=(0,d.useCallback)(async()=>{var e,i;if(!p)return;await n.setCurrentProjectToClipProject(t),"/create"===a&&c===f.J1.CHAT&&v(f.J1.CUSTOM);let r=await l.runConcat(t.id,!!(null===(e=t.metadata)||void 0===e?void 0:e.infill),{editSessionId:null===(i=t.metadata)||void 0===i?void 0:i.edit_session_id});r&&s(r)},[t,l,n,s,p]),h=(null==t?void 0:t.user_id)===(null==r?void 0:r.userId);return(null==t?void 0:null===(e=t.metadata)||void 0===e?void 0:e.infill)&&h?(0,i.Y)(tr,{icon:(0,i.Y)(Z.A,{}),onClick:(0,q.c)({actionName:"SongMenuConfirmSectionClicked",context:{clipId:null==t?void 0:t.id}},m),"aria-label":"Confirm section",enableForIncompleteClips:!0,children:"Confirm Section"}):null},tC=()=>{var e;let t=(0,y.TF)(),{session:l,genForm:n}=(0,u.gy)(),{openModalWithData:r}=(0,I.k)(),a=(0,o.useRouter)(),d=(0,o.usePathname)(),s=w(eX.A),c=(0,eG.eX)(),[v,p]=(0,C.i7)(g.Ay,e=>e.selectState(["global","mode"]));return(null===(e=l.flags)||void 0===e?void 0:e["under-over-painting"])&&(0,eF.Bw)(t)&&(0,eU.v1)(l.billingModels,"chirp-bluejay")?(0,i.Y)(tr,{icon:(0,i.Y)($.A,{}),onClick:(0,q.c)({actionName:"RemixEditOverpaintingClicked",context:{clipId:null==t?void 0:t.id,isOwner:(null==t?void 0:t.user_id)===(null==l?void 0:l.userId)}},()=>{if(!(0,N.cA)(l,P.s$.PLAYLIST_CONDITION)){r(k.H.UPSELL_MODAL,{feature:P.m.VOCALS});return}s(),"/create"!==d&&"/studio"!==d?(v===f.J1.CHAT&&p(f.J1.CUSTOM),a.push("/create?remix_clip="+t.id+"&remix_type=add_vocal")):"/create"===d&&v===f.J1.CHAT&&p(f.J1.CUSTOM),n.shouldOpenMobileCreate=!0,c()}),renderTags:()=>(0,i.Y)(S.Ay,{className:"ml-2",variant:S.qs.Pro,children:"Pro"}),children:"Add Vocal"}):null},tw=()=>{var e;let t=(0,y.TF)(),{session:l,genForm:n}=(0,u.gy)(),{openModalWithData:r}=(0,I.k)(),a=(0,o.useRouter)(),d=(0,o.usePathname)(),s=w(e0.A),c=(0,eG.eX)(),[v,p]=(0,C.i7)(g.Ay,e=>e.selectState(["global","mode"]));return(null===(e=l.flags)||void 0===e?void 0:e["under-over-painting"])&&(0,eF.Ex)(t)&&(0,eU.v1)(l.billingModels,"chirp-bluejay")?(0,i.Y)(tr,{icon:(0,i.Y)($.A,{}),onClick:(0,q.c)({actionName:"RemixEditUnderpaintingClicked",context:{clipId:null==t?void 0:t.id,isOwner:(null==t?void 0:t.user_id)===(null==l?void 0:l.userId)}},()=>{if(!(0,N.cA)(l,P.s$.PLAYLIST_CONDITION)){r(k.H.UPSELL_MODAL,{feature:P.m.VOCALS});return}s(),c(),"/create"!==d&&"/studio"!==d?(v===f.J1.CHAT&&p(f.J1.CUSTOM),a.push("/create?remix_clip="+t.id+"&remix_type=add_instrumental")):"/create"===d&&v===f.J1.CHAT&&p(f.J1.CUSTOM),n.shouldOpenMobileCreate=!0}),renderTags:()=>(0,i.Y)(S.Ay,{className:"ml-2",variant:S.qs.Pro,children:"Pro"}),children:"Add Instrumental"}):null},tb=()=>{var e;let{openModalWithData:t}=(0,I.k)(),l=(0,y.TF)(),n=F(),{session:r}=(0,u.gy)(),a=!!(0,N.cA)(r,P.s$.Studio),o=(0,eL.Lb)(l,r),s=(0,d.useCallback)(()=>{if(!o)return n()||t(k.H.STEMS,{clipId:l.id,initialView:"initial"},k.f.SONG_MENU)},[l.id,n,t,o]);if(l.user_id!==(null===(e=r.user)||void 0===e?void 0:e.id)||l.is_trashed)return null;let c="complete"!==l.status||(0,Y.qM)(l)||o;return(0,i.Y)(tr,{icon:(0,i.Y)($.A,{}),onClick:(0,q.c)({actionName:"SongMenuGetStemsClicked",context:{clipId:l.id}},s),"aria-label":a?"Extract MIDI from this song":"Get stems for this song",disabled:c,renderTags:()=>(0,i.Y)(S.Ay,{className:"ml-2",variant:S.qs.Pro,children:"Pro"}),children:a?"Get Stems / MIDI":"Get Stems"})},tA=()=>{let e=(0,y.TF)(),{queue:t,session:l}=(0,u.gy)(),n=(0,d.useCallback)(()=>{t.addToQueue(e),(0,M.oR)({title:"Added to song queue",status:"info",duration:2e3,isClosable:!0})},[t,e]);return e.is_trashed?null:(0,i.Y)(tr,{icon:(0,i.Y)(ee.A,{}),onClick:(0,q.c)({actionName:"SongMenuAddToPlaylistClicked",context:{clipId:null==e?void 0:e.id,isUserSongOwner:(null==l?void 0:l.userId)!==void 0&&(null==e?void 0:e.user_id)===(null==l?void 0:l.userId)}},n),enableForIncompleteClips:!0,children:"Add to Queue"})},tk=()=>{let e=(0,C.i7)(eZ.Ay,e=>e.selectedClipIds),t=(0,C.i7)(eZ.Ay,e=>e.clear),{clips:l}=(0,ez.X)(e),{queue:n,session:r}=(0,u.gy)(),a=(0,d.useCallback)(()=>{let i=e.map(e=>l[e]).filter(Boolean);i.forEach(e=>{n.addToQueue(e)}),(0,M.oR)({title:"Added ".concat(i.length," songs to queue"),status:"info",duration:2e3,isClosable:!0}),t()},[n,e,l,t]),o=e.length>1?(0,eB.D)("U"):void 0;return(0,i.Y)(tr,{icon:(0,i.Y)(ee.A,{}),enableForIncompleteClips:!0,onClick:(0,q.c)(()=>{var t,i;let n=e.map(e=>l[e]).filter(Boolean);return{actionName:"SongMenuAddToPlaylistClicked",context:{clipId:null===(t=n[0])||void 0===t?void 0:t.id,isUserSongOwner:(null==r?void 0:r.userId)!==void 0&&(null===(i=n[0])||void 0===i?void 0:i.user_id)===(null==r?void 0:r.userId)}}},a),renderTags:o?()=>(0,i.Y)("span",{className:"ml-2 text-xs text-foreground-tertiary",children:o}):void 0,children:"Add to Queue"})},tx=()=>{var e;let t=(0,y.TF)(),{menus:l,session:n}=(0,u.gy)(),{openModal:r}=(0,I.k)(),a=(0,d.useMemo)(()=>[t.id],[t.id]),o=(0,C.i7)(eZ.Ay,e=>0===e.selectedClipIds.length?a:e.selectedClipIds),s=(0,d.useCallback)(()=>{l.setSelected(new Set(o)),r(k.H.ADD_TO_PLAYLIST,"SongMenu")},[l,o,r]);if(t.is_trashed||!(null===(e=n.user)||void 0===e?void 0:e.id))return null;let c=o.length>1?(0,eB.D)("P"):void 0;return(0,i.Y)(tr,{icon:(0,i.Y)(G.A,{}),enableForIncompleteClips:!0,onClick:(0,q.c)({actionName:"SongMenuAddToPlaylistClicked",context:{clipId:null==t?void 0:t.id,isUserSongOwner:(null==n?void 0:n.userId)!==void 0&&(null==t?void 0:t.user_id)===(null==n?void 0:n.userId)}},s),renderTags:c?()=>(0,i.Y)("span",{className:"ml-2 text-xs text-foreground-tertiary",children:c}):void 0,children:"Add to Playlist"})},tY=()=>{let e=(0,y.TF)(),{menus:t,clips:l,session:n}=(0,u.gy)(),{openModal:r}=(0,I.k)(),a=(0,d.useMemo)(()=>[e.id],[e.id]),o=(0,C.i7)(eZ.Ay,e=>0===e.selectedClipIds.length?a:e.selectedClipIds),s=(0,d.useCallback)(()=>{t.setSelected(new Set(o)),r(k.H.ADD_TO_PROJECT)},[t,o,r]),c=o.every(e=>{var t;let i=l.clipById[e];return(null==i?void 0:i.user_id)===(null===(t=n.user)||void 0===t?void 0:t.id)});if((null==e?void 0:e.is_trashed)||!c)return null;let v=o.length>1?(0,eB.D)("S"):void 0;return(0,i.Y)(tr,{icon:(0,i.Y)(et.A,{}),enableForIncompleteClips:!0,onClick:(0,q.c)({actionName:"SongMenuMoveToWorkspaceClicked",context:{clipId:null==e?void 0:e.id}},s),renderTags:v?()=>(0,i.Y)("span",{className:"ml-2 text-xs text-foreground-tertiary",children:v}):void 0,children:"Move to Workspace"})},tS=()=>{var e;let t=(0,y.TF)(),{session:l}=(0,u.gy)(),{togglePublishClicked:n,isPublished:r}=(0,D.A)(t),a=e7(),o=(null===(e=l.user)||void 0===e?void 0:e.id)===(null==t?void 0:t.user_id),d=!!(null==t?void 0:t.is_trashed),s=(0,eE.ah)(t);return!a||!o||d||s?null:(0,i.Y)(tr,{icon:r?(0,i.Y)(el.A,{}):(0,i.Y)(ei.A,{}),onClick:(0,q.c)({actionName:r?"SongMenuUnpublishClicked":"SongMenuPublishClicked",context:{clipId:t.id}},()=>{n()}),children:r?"Unpublish":"Publish"})},tM=()=>{var e;let{library:t,session:l}=(0,u.gy)(),{openModal:n}=(0,I.k)(),r=(0,y.TF)(),a=e7(),o=(0,d.useCallback)(()=>{t.setActiveClip(r),n(k.H.UPDATE_CLIP_METADATA,"SongMenu")},[t,r,n]);return(null===(e=l.user)||void 0===e?void 0:e.id)!==(null==r?void 0:r.user_id)||(null==r?void 0:r.is_trashed)||!a?null:(0,i.Y)(tr,{icon:(0,i.Y)(en.A,{}),onClick:o,enableForIncompleteClips:!0,children:"Song Details"})},tT=()=>{var e;let t=(0,y.TF)(),{session:l}=(0,u.gy)(),n=(0,r.useGateValue)("gen-video-covers"),{openModalWithData:a}=(0,I.k)(),o=e7(),s=(0,d.useCallback)(()=>{a(k.H.GENERATE_COVER_ART,{clipId:t.id,useClipCoverImage:!1},"SongMenu")},[a,t]);return!n||(null===(e=l.user)||void 0===e?void 0:e.id)!==(null==t?void 0:t.user_id)||(null==t?void 0:t.is_trashed)||!o?null:(0,i.Y)(tr,{icon:(0,i.Y)(eP.A,{}),onClick:s,children:"Generate Cover Art"})},tI=()=>{let e=(0,y.TF)(),{session:t}=(0,u.gy)(),l=(0,e2.a)(e),n=(0,e9.A)(),r=(0,d.useCallback)(()=>{n(e)},[e,n]);return(0,i.Y)(tr,{icon:(0,i.Y)(er.A,{}),onClick:(0,q.c)({actionName:"SongMenuCopyLinkClicked",context:{clipId:e.id,isUserSongOwner:(null==t?void 0:t.userId)!==void 0&&l}},r),enableForIncompleteClips:!0,children:"Copy Link"})},t_=()=>{let e=(0,y.TF)(),t=(0,e2.a)(e),l=(0,e9.A)(),{playbar:n,session:r}=(0,u.gy)(),{isLoadedIntoPlayer:a}=(0,b.w_)(),o=(0,d.useCallback)(()=>{var t,i;l(e,Math.round(null!==(i=null!==(t=n.getCurrentTime())&&void 0!==t?t:n.currentTime)&&void 0!==i?i:0))},[e,l,n]);return a?(0,i.Y)(tr,{icon:(0,i.Y)(er.A,{}),onClick:(0,q.c)(()=>{var l,i;let a=Math.round(null!==(i=null!==(l=n.getCurrentTime())&&void 0!==l?l:n.currentTime)&&void 0!==i?i:0);return{actionName:"TimestampURLCopiedSongMenu",context:{clipId:null==e?void 0:e.id,isUserSongOwner:(null==r?void 0:r.userId)!==void 0&&t,timestamp:a}}},o),enableForIncompleteClips:!0,children:"Copy Link at Current Time"}):null},tP=()=>{let e=(0,y.TF)(),t=(0,R.RH)(),l=(0,e2.a)(e),{session:n}=(0,u.gy)(),r=(0,d.useCallback)(async()=>{try{let{data:l}=await t.POST("/api/gen/{gen_id}/update_flag_state/",{params:{path:{gen_id:e.id}},body:{flagged:!0,flagged_reason:"flag_inappropriate"}});l&&(0,M.oR)({title:"Song flagged.",description:"This song has been flagged for review.",status:"warning",duration:4e3,isClosable:!0})}catch(e){(0,M.oR)({title:"Error flagging song.",description:"Something went wrong. Please try again later.",status:"error",duration:5e3,isClosable:!0})}},[e.id,t]);return(0,i.Y)(tr,{icon:(0,i.Y)(ea.A,{}),onClick:(0,q.c)({actionName:"SongMenuReportInappropriateClicked",context:{clipId:e.id,isUserSongOwner:(null==n?void 0:n.userId)!==void 0&&l}},r),enableForIncompleteClips:!0,children:"Inappropriate"})},tN=()=>{let e=(0,y.TF)(),{openModalWithData:t}=(0,I.k)(),l=(0,e2.a)(e),{session:n}=(0,u.gy)(),r=(0,d.useCallback)(()=>{t(k.H.FLAG_CLIP,{clipId:e.id,clipTitle:e.title||"Untitled"})},[e,t]);return l?(0,i.Y)(tr,{icon:(0,i.Y)(eo.A,{}),onClick:(0,q.c)({actionName:"SongMenuReportBugClicked",context:{clipId:e.id,isUserSongOwner:(null==n?void 0:n.userId)!==void 0&&l}},r),enableForIncompleteClips:!0,children:"Bug"}):null},tF=()=>{let e=(0,y.TF)(),{openModalWithData:t}=(0,I.k)(),l=(0,e2.a)(e),n=(0,d.useCallback)(()=>{t(k.H.COPYRIGHT_FLAG,{clipId:e.id})},[e,t]);return(0,i.Y)(tr,{icon:(0,i.Y)(ed.A,{}),onClick:(0,q.c)({actionName:"SongMenuReportCopyrightClicked",context:{clipId:e.id,isUserSongOwner:l}},n),enableForIncompleteClips:!0,children:"Copyright Infringement"})},tE=()=>{let e=(0,y.TF)(),{session:t}=(0,u.gy)(),{openModalWithData:l}=(0,I.k)(),n=(0,e2.a)(e),r=(0,d.useCallback)(()=>{l(k.H.SHARE_CLIP,{clipId:e.id},"SongMenu"),t.clearTooltipOnShare(),(0,eN.Yy)("share_button_clicked",{clipId:e.id,isUserSongOwner:(null==t?void 0:t.userId)!==void 0&&n,clipTitle:e.title,method:"sharelink"})},[e.id,l,t]);return(0,i.Y)(tr,{icon:(0,i.Y)(es.A,{}),onClick:(0,q.c)({actionName:"SongMenuShareToClicked",context:{clipId:e.id,isUserSongOwner:(null==t?void 0:t.userId)!==void 0&&n}},r),enableForIncompleteClips:!0,children:"Share to..."})},tL=()=>{let e=(0,y.TF)(),{session:t}=(0,u.gy)(),{openModalWithData:l}=(0,I.k)(),n=(0,e2.a)(e),a=(0,r.useGateValue)("enable-sharelist-and-share-notifications"),o=(0,d.useCallback)(()=>{l(k.H.SHARE_WITH_FRIENDS,{clipId:e.id},"SongMenu"),(0,eN.Yy)("share_button_clicked",{clipId:e.id,isUserSongOwner:(null==t?void 0:t.userId)!==void 0&&n,clipTitle:e.title,method:"in_app"})},[e.id,l]);return a?(0,i.Y)(tr,{icon:(0,i.Y)(ec.A,{}),onClick:(0,q.c)({actionName:"SongMenuShareWithFriendsClicked",context:{clipId:e.id,isUserSongOwner:(null==t?void 0:t.userId)!==void 0&&n}},o),enableForIncompleteClips:!0,children:"Share with friends"}):null},tD=()=>{let e=(0,y.TF)(),{session:t}=(0,u.gy)(),l=(0,o.usePathname)(),n=(0,o.useRouter)(),r=(0,e2.a)(e),a=e7(),s=(0,d.useCallback)(()=>{n.push("/radio/song/".concat(e.id))},[e.id,n]);return t.user&&l!=="/radio/song/".concat(e.id)&&a?(0,i.Y)(tr,{icon:(0,i.Y)(eu.A,{}),onClick:(0,q.c)({actionName:"SongMenuSongRadioClicked",context:{clipId:e.id,isUserSongOwner:r}},s),children:"Song Radio"}):null},tO=()=>{var e,t,l,n,r,a,o,s,c,v;let p=(0,y.TF)(),{session:m,genForm:h}=(0,u.gy)(),g=null===(e=p.persona)||void 0===e?void 0:e.is_hidden,f=e7(),{openModalWithData:C}=(0,I.k)(),w=(0,d.useCallback)(()=>{if(f&&!g){if(h.setIsRemixCreate(!1),!(0,N.cA)(m,P.s$.Persona)){C(k.H.UPSELL_MODAL,{feature:P.m.PERSONAS});return}C(k.H.VOX_PERSONA,{clipId:p.id,title:"Create a Persona"})}},[p,m,h,f,g,C]),b=!!(null===(t=p.metadata)||void 0===t?void 0:t.infill),A=(null==p?void 0:null===(l=p.metadata)||void 0===l?void 0:l.type)==="stem",x=!!(null===(n=p.persona)||void 0===n?void 0:n.id),Y=(null==p?void 0:p.user_id)===(null===(r=m.user)||void 0===r?void 0:r.id),M=!!((null==p?void 0:null===(a=p.metadata)||void 0===a?void 0:a.has_vocal)||(null==p?void 0:null===(o=p.metadata)||void 0===o?void 0:o.type)==="upload"),T=!!M||(0,eE.QU)(p),_=(null==p?void 0:p.user_id)===(null===(s=m.user)||void 0===s?void 0:s.id);if(b||A||!Y||x&&(null===(c=p.metadata)||void 0===c?void 0:c.type)!=="edit_crop")return null;let F=(0,N.Xl)(m),E=!1;return E=F?!M&&!T:!M&&!T||!_||M&&!(null===(v=m.flags)||void 0===v?void 0:v["personas-audio-upload"]),(0,i.Y)(tr,{icon:(0,i.Y)(ev.A,{}),onClick:w,"aria-label":"Create Persona",disabled:E,renderTags:()=>(0,i.Y)(S.Ay,{className:"ml-2",variant:S.qs.Pro,children:"Pro"}),children:"Make Persona"})},tR=()=>{var e;let t=(0,y.TF)(),{launchDialog:l}=(0,A.LN)(),{saveCard:n}=(0,h.B)(),a=(0,r.useGateValue)("stack-ui"),o=null===(e=t.metadata)||void 0===e?void 0:e.stacked_task_clips,d=Array.isArray(o)&&o.length>0;if(!a||!d)return null;let s=async()=>{var e,r,a,d;let s=t.title||(null===(e=t.metadata)||void 0===e?void 0:e.prompt)||"Untitled",c=(null===(r=t.metadata)||void 0===r?void 0:r.prompt)||"",u=(null===(a=t.metadata)||void 0===a?void 0:a.tags)||"",v=(null===(d=t.metadata)||void 0===d?void 0:d.negative_tags)||"",p=await l(e=>{let{onDialogAction:t}=e;return(0,i.Y)(m.S,{onDialogAction:t,initialStackedTasks:o,initialLyrics:c,initialStyles:u,initialExcludeStyles:v,initialTitle:"Card from: ".concat(s)})},[],{className:"w-[500px]"});p&&"object"==typeof p&&"title"in p&&(n({title:p.title,description:p.description,artworkUrl:t.image_url||null,stackedTasks:p.stackedTasks,lyrics:p.lyrics,styles:p.styles,excludeStyles:p.excludeStyles}),(0,M.oR)({title:"Card saved",description:'"'.concat(p.title,'" has been added to your card library.'),status:"success"}))};return(0,i.Y)(tr,{icon:(0,i.Y)(ep.A,{}),onClick:s,"aria-label":"Save as Card",children:"Save as Card"})},tq=()=>{var e,t,l,n,r,a;let d=(0,y.TF)(),{session:s,genForm:c}=(0,u.gy)(),{openModalWithData:v}=(0,I.k)(),p=(0,o.usePathname)(),m=(0,o.useRouter)(),h=w(e=>(0,e1.A)(e)),g=!!(null===(e=d.metadata)||void 0===e?void 0:e.infill),f=!(null===(t=d.persona)||void 0===t?void 0:t.is_owned)&&!(null===(l=d.persona)||void 0===l?void 0:l.is_public),C=null===(n=d.persona)||void 0===n?void 0:n.is_hidden;if(g||!(null===(r=d.persona)||void 0===r?void 0:r.id)||f||C)return null;let b=!ti({clip:d,session:s}),A=(null===(a=d.persona)||void 0===a?void 0:a.name)||"Persona",x=A.length>20?"".concat(A.slice(0,20),"..."):A;return(0,i.Y)(tr,{icon:(0,i.Y)(ev.A,{}),onClick:(0,q.c)({actionName:"SongMenuUsePersonaClicked",context:{clipId:null==d?void 0:d.id,isUserSongOwner:(null==s?void 0:s.userId)!==void 0&&(null==d?void 0:d.user_id)===(null==s?void 0:s.userId)}},()=>{if(!(0,N.cA)(s,P.s$.Persona)){v(k.H.UPSELL_MODAL,{feature:P.m.PERSONAS});return}if("/create"!==p&&"/studio"!==p){var e;m.push("/create?persona_id="+(null===(e=d.persona)||void 0===e?void 0:e.id))}h(),c.shouldOpenMobileCreate=!0}),disabled:b,renderTags:()=>(0,i.Y)(S.Ay,{className:"ml-2",variant:S.qs.Pro,children:"Pro"}),children:"Use ".concat(x)})},tB=()=>{var e,t,l;let n=(0,y.TF)(),{genForm:a}=(0,u.gy)(),s=(0,o.usePathname)(),c=(0,o.useRouter)(),v=(0,r.useGateValue)("sample"),p=(0,r.useGateValue)("multi-sample"),m=(0,eG.eX)(),h=(0,e2.a)(n),w=(0,C.i7)(g.Ay,e=>e.addSampleClips),[b,A]=(0,C.i7)(g.Ay,e=>e.selectState(["global","mode"])),k=(0,C.i7)(g.Ay,e=>{let t=e.state.global.untimedConditions.sample;return null==t?void 0:t.clips}),x=(0,d.useMemo)(()=>(null==k?void 0:k.map(e=>e.clipId))||[],[k]);if(!(v||p))return null;let Y=!h&&(null===(e=n.metadata)||void 0===e?void 0:e.can_remix)===!0;if(!h&&!Y||n.is_trashed)return null;let T=x.length>=(p?10:1);return(0,i.Y)(tr,{icon:(0,i.Y)($.A,{}),onClick:()=>{if(T){(0,M.oR)({title:"Maximum Reached",description:p?"You can add up to 10 sample clips.":"Sample mode only supports 1 clip.",status:"warning",duration:3e3,isClosable:!0});return}"/create"!==s&&"/studio"!==s?(b===f.J1.CHAT&&A(f.J1.CUSTOM),c.push("/create")):"/create"===s&&b===f.J1.CHAT&&A(f.J1.CUSTOM),w([n.id]),a.shouldOpenMobileCreate=!0,m(),(0,M.oR)({title:"Added to Sample",description:'Using "'.concat(n.title||"Untitled",'" as sample.'),status:"success",duration:3e3,isClosable:!0})},renderTags:()=>(0,i.Y)(S.Ay,{className:"ml-2",variant:S.qs.Aura,children:"Beta"}),children:(0,L.TX)(null!==(l=null===(t=n.metadata)||void 0===t?void 0:t.duration)&&void 0!==l?l:1/0)?"Sample this song":"Use as Sample"})},tH=()=>{let e=(0,y.TF)(),{session:t,menus:l,clips:n,library:a}=(0,u.gy)(),s=(0,o.useRouter)(),c=(0,r.useStatsigClient)(),v=(0,R.RH)(),p=(0,d.useCallback)(async()=>{(0,eL.Lb)(e,t)||((0,q.Ay)({actionName:"SongMenuMP3AudioClicked",context:{clipId:null==e?void 0:e.id,isUserSongOwner:(null==t?void 0:t.userId)!==void 0&&(null==e?void 0:e.user_id)===(null==t?void 0:t.userId)}}),await tn(e,l,t,n,s,c,v,()=>{(0,eL.fg)(a.apiClient,e,t),(0,eL.Nf)(a.apiClient,e.id)}))},[e,t,l,n,a,s,c,v]),m=(0,eL.Lb)(e,t);return(0,i.Y)(tr,{icon:(0,i.Y)(em.A,{}),onClick:p,disabled:m,enableForIncompleteClips:!1,children:"MP3 Audio"})},tU=()=>{let e=(0,y.TF)(),{session:t,menus:l,clips:n,library:a}=(0,u.gy)(),{openModal:s,openModalWithData:c}=(0,I.k)(),v=(0,o.useRouter)(),p=e7(),m=(0,r.useStatsigClient)(),h=(0,R.RH)(),g=(0,d.useCallback)(async()=>{if(!(!p||(0,eL.Lb)(e,t))){if(!(0,eU.u_)(t)){c(k.H.UPSELL_MODAL,{feature:P.m.DOWNLOAD_WAV});return}(0,q.Ay)({actionName:"SongMenuWAVAudioClicked",context:{clipId:null==e?void 0:e.id,isUserSongOwner:(null==t?void 0:t.userId)!==void 0&&(null==e?void 0:e.user_id)===(null==t?void 0:t.userId)}}),await tn(e,l,t,n,v,m,h,()=>{s(k.H.DOWNLOAD_FILE),(0,eL.pm)(a.apiClient,e.id),n.pendingWavDownloadClip=e,n.pendingWavDownloadAtTime=Date.now(),n.setPendingWavPolling()})}},[e,t,l,n,a,v,p,m,h,s,c]),f=!p||(0,eL.Lb)(e,t),C=(null==e?void 0:e.user_id)===(null==t?void 0:t.userId);return!t.isStaff&&!C||(null==e?void 0:e.is_trashed)?null:(0,i.Y)(tr,{icon:(0,i.Y)(em.A,{}),onClick:(0,q.c)({actionName:"SongMenuWAVAudioClicked",context:{clipId:null==e?void 0:e.id,isUserSongOwner:(null==t?void 0:t.userId)!==void 0&&(null==e?void 0:e.user_id)===(null==t?void 0:t.userId)}},g),disabled:f,enableForIncompleteClips:!1,renderTags:()=>(0,i.Y)(S.Ay,{className:"ml-2",variant:S.qs.Pro,children:"Pro"}),children:"WAV Audio"})},tV=()=>{let e=(0,y.TF)(),{session:t,library:l}=(0,u.gy)(),n=e7(),a=(0,r.useGateValue)("download-sample-pack"),o=(0,d.useCallback)(async()=>{if(!(!n||(0,eL.Lb)(e,t))){(0,M.oR)({title:"Your sample pack is being prepared",description:"This may take 2-3 minutes, please wait...",status:"info",duration:8e3,isClosable:!0});try{await (0,eL.yB)(l.apiClient,e)}catch(e){(0,M.oR)({title:"Sample pack generation failed",description:"Please try again later.",status:"error",duration:5e3,isClosable:!0})}}},[e,t,l,n]);if(!a)return null;let s=!n||(0,eL.Lb)(e,t);return(0,i.Y)(tr,{icon:(0,i.Y)(eh.A,{}),onClick:o,disabled:s,enableForIncompleteClips:!1,renderTags:()=>(0,i.Y)(S.Ay,{className:"ml-2",variant:S.qs.Beta,children:"Beta"}),children:"Sample Pack"})},tj=()=>{let e=(0,y.TF)(),t=e7(),l=(0,r.useGateValue)("cleffy"),{downloadSheetMusic:n,isLoading:a}=function(){let e=(0,R.RH)(),{session:t}=(0,u.gy)(),l=(0,O.useMutation)({mutationFn:async t=>{let{clip:l}=t;return H(e,l,()=>{(0,M.oR)({title:"Generating MIDI transcription...",description:"Transcribing audio to MIDI. This may take up to a minute.",status:"info",duration:1e4})})},onMutate:e=>{let{clip:l}=e;(0,q.Ay)({actionName:"SongMenuSheetMusicClicked",context:{clipId:l.id,isUserSongOwner:(null==t?void 0:t.userId)!==void 0&&l.user_id===(null==t?void 0:t.userId)}}),(0,M.oR)({title:"Preparing sheet music...",description:"This may take a moment.",status:"info",duration:5e3})},onSuccess:e=>{if(e.success)(0,M.oR)({title:"Sheet music downloaded!",status:"success"});else{var t,l,i;let n=null===(t=e.error)||void 0===t?void 0:t.includes("Premier subscription"),r=null===(l=e.error)||void 0===l?void 0:l.includes("No transcribable notes"),a=null===(i=e.error)||void 0===i?void 0:i.includes("timed out");(0,M.oR)({title:n?"No permission":r?"No notes found":a?"Generation timed out":"Failed to generate sheet music",description:e.error,status:n?"error":"info"})}},onError:e=>{console.error("Failed to generate or download sheet music:",e),(0,M.oR)({title:"Failed to generate sheet music",description:"An error occurred during conversion or download.",status:"error"})}});return{downloadSheetMusic:(0,d.useCallback)(e=>{l.mutate(e)},[l]),isLoading:l.isPending,isError:l.isError,error:l.error}}(),o=(0,d.useCallback)(()=>{e&&n({clip:e})},[e,n]);return l?(0,i.Y)(tr,{icon:(0,i.Y)(eg.A,{}),onClick:o,disabled:!t||a,enableForIncompleteClips:!1,children:"Sheet Music"}):null},tz=()=>{var e;let t=(0,y.TF)(),{session:l,menus:n,clips:a,library:s}=(0,u.gy)(),c=(0,o.useRouter)(),v=(0,r.useStatsigClient)(),p=(0,R.RH)(),m=e7(),h=(0,d.useCallback)(async()=>{let e=!!(null==t?void 0:t.video_url),i=!!a.videoPendingById[null==t?void 0:t.id];!e||i||(0,eL.Lb)(t,l)||((0,q.Ay)({actionName:"SongMenuVideoClicked",context:{clipId:null==t?void 0:t.id,isUserSongOwner:(null==l?void 0:l.userId)!==void 0&&(null==t?void 0:t.user_id)===(null==l?void 0:l.userId)}}),await tn(t,n,l,a,c,v,p,()=>{(0,eL.UG)(s.apiClient,t,l)}))},[t,l,n,a,s,c,v,p]),g=!!(null==t?void 0:t.video_url),f=!!a.videoPendingById[null==t?void 0:t.id],C=!g||f||(0,eL.Lb)(t,l),w=!!(null==t?void 0:null===(e=t.metadata)||void 0===e?void 0:e.video_is_stale),b=(0,N.cA)(l,P.s$.GenerateSongVideo);return m&&g&&(!b||!w)?(0,i.Y)(tr,{icon:(0,i.Y)(ef.A,{}),onClick:(0,q.c)({actionName:"SongMenuVideoClicked",context:{clipId:null==t?void 0:t.id,isUserSongOwner:(null==l?void 0:l.userId)!==void 0&&(null==t?void 0:t.user_id)===(null==l?void 0:l.userId)}},h),disabled:C,enableForIncompleteClips:!0,children:"Video"}):null},tG=()=>{var e;let t=(0,y.TF)(),{session:l,clips:n}=(0,u.gy)(),{openModalWithData:a}=(0,I.k)(),s=(0,o.useRouter)(),c=(0,r.useStatsigClient)(),v=e7(),p=(0,eL.Lb)(t,l),m=(0,N.cA)(l,P.s$.GenerateSongVideo),h=(0,d.useCallback)(()=>{if(!n.videoPendingById[t.id]&&!p){if(!m){a(k.H.UPSELL_MODAL,{feature:P.m.GENERATE_VIDEO});return}n.regenerateVideo(t,s,c,tn)}},[t,n,s,p,c,a,m]),g=!!n.videoPendingById[t.id]||p,f=!!(null==t?void 0:t.video_url),C=!!(null==t?void 0:null===(e=t.metadata)||void 0===e?void 0:e.video_is_stale);return v&&(m?!f||C:!f)?(0,i.Y)(tr,{icon:(0,i.Y)(ey.A,{}),onClick:(0,q.c)({actionName:"SongMenuRegenerateVideoClicked",context:{clipId:null==t?void 0:t.id,isUserSongOwner:void 0!==l.userId&&(null==t?void 0:t.user_id)===(null==l?void 0:l.userId)}},h),disabled:g,enableForIncompleteClips:!1,renderTags:()=>(0,i.Y)(S.Ay,{className:"ml-2",variant:S.qs.Pro,children:"Pro"}),children:(0,i.Y)("div",{className:"flex w-full flex-row items-center gap-2",children:(0,i.Y)("span",{children:"Video"})})}):null},tJ=()=>{let e=(0,y.TF)(),{session:t,clips:l}=(0,u.gy)(),{openModal:n}=(0,I.k)(),r=e7(),a=(0,d.useCallback)(()=>{!r||(0,eL.Lb)(e,t)||(l.selectedShareAssetClip=e,n(k.H.DOWNLOAD_SHARE_ASSET))},[e,l,r,n,t]);if(!(t.isStaff&&!(null==e?void 0:e.is_trashed)))return null;let o=!r||(0,eL.Lb)(e,t);return(0,i.Y)(tr,{icon:(0,i.Y)(eC.A,{}),onClick:a,disabled:o,enableForIncompleteClips:!1,children:"Share Asset"})},tQ=(0,a.PA)(()=>{let e=(0,y.TF)(),{clips:t}=(0,u.gy)(),l=(0,d.useCallback)(async()=>{let l=!e.allow_comments;await t.setCommentsEnabled(e.id,l),(0,M.oR)({title:"Comments have been ".concat(l?"enabled":"disabled","."),duration:2e3,isClosable:!0}),(0,q.Ay)({actionName:"SongMenuAllowCommentsClicked",context:{clipId:null==e?void 0:e.id,enable:l}})},[e,t]);return(0,i.Y)(tr,{icon:(0,i.Y)(ew.A,{}),onClick:l,enableForIncompleteClips:!0,keepMenusOpen:!0,children:(0,i.FD)("div",{className:"flex w-full flex-row items-center justify-between gap-2",children:[(0,i.Y)("span",{children:"Allow Comments"}),(0,i.Y)(eJ.A,{small:!0,checked:!!e.allow_comments,containerClassName:"pointer-events-none"})]})})}),tW=(0,a.PA)(()=>{var e,t,l,n,r;let a=(0,y.TF)(),{clips:o,session:s}=(0,u.gy)(),c=(0,d.useCallback)(async()=>{var e,t,l,i;if((null!==(i=null===(t=a.metadata)||void 0===t?void 0:null===(e=t.contest_ids)||void 0===e?void 0:e.length)&&void 0!==i?i:0)>0)return;let n=(null===(l=a.metadata)||void 0===l?void 0:l.can_remix)===!0;(0,q.Ay)({actionName:"SongMenuAllowRemixesToggled",context:{clipId:null==a?void 0:a.id,allowed:!n}}),await o.toggleCanRemix(a.id,!n),(0,M.oR)({title:"Remixes have been ".concat(n?"disabled":"enabled","."),duration:2e3,isClosable:!0})},[a,o]),v=(null===(e=s.user)||void 0===e?void 0:e.id)===(null==a?void 0:a.user_id),p=(null!==(r=null===(l=a.metadata)||void 0===l?void 0:null===(t=l.contest_ids)||void 0===t?void 0:t.length)&&void 0!==r?r:0)>0;return v?(0,i.Y)(tr,{keepMenusOpen:!0,icon:(0,i.Y)(U.A,{}),disabled:p,enableForIncompleteClips:!0,onClick:c,children:(0,i.Y)(T.m,{label:"You can now Remix songs on Suno — and other users can Remix your songs, too! By default, songs you create will Allow Remixes, but you can turn it off for any song here. Every Remix will link back to the song that inspired it, so you'll always get credit where it's due.",placement:"right",children:(0,i.FD)("div",{className:"flex w-full flex-row justify-between gap-2",children:[(0,i.Y)("span",{className:"flex flex-1 items-center",children:"Allow Remixes"}),(0,i.Y)(eJ.A,{small:!0,checked:(null===(n=a.metadata)||void 0===n?void 0:n.can_remix)===!0,containerClassName:"pointer-events-none"})]})})}):null}),tZ=(0,a.PA)(()=>{var e,t;let l=(0,y.TF)(),{clips:n,session:r}=(0,u.gy)(),{openModalWithData:a}=(0,I.k)(),o=(0,d.useCallback)(async()=>{(0,q.Ay)({actionName:"SongMenuPinToProfileClicked",context:{clipId:null==l?void 0:l.id,isPinned:!n.isClipPinned(l.id)}}),await (0,eH.d)({clip:l,clips:n,openModalWithData:a,session:r})},[l,n,a,r]),s=null===(e=r.flags)||void 0===e?void 0:e["profile-pins"],c=(null===(t=r.user)||void 0===t?void 0:t.id)===(null==l?void 0:l.user_id);return!s||!c||(0,eE.ah)(l)?null:(0,i.Y)(tr,{keepMenusOpen:!0,icon:(0,i.Y)(eb.A,{}),onClick:o,children:(0,i.FD)("div",{className:"flex w-full flex-row items-center gap-2",children:[(0,i.Y)("span",{children:(null==n?void 0:n.isClipPinned(l.id))?"Unpin from Profile":"Pin to Profile"}),(0,i.Y)("div",{className:"ml-auto",children:(0,i.Y)(eJ.A,{small:!0,checked:null==n?void 0:n.isClipPinned(l.id),containerClassName:"pointer-events-none"})})]})})}),tK=(0,a.PA)(()=>{var e,t;let l=(0,y.TF)(),{clips:n,session:a}=(0,u.gy)(),o=(0,r.useStatsigClient)(),s=(0,d.useCallback)(async()=>{var e;let t=(null===(e=l.metadata)||void 0===e?void 0:e.opt_out_video_cover_hook)!==!0;await n.toggleVideoHookFeedVisibility(l.id,!t),(0,M.oR)({title:"Video cover ".concat(t?"will be hidden":"will be shown"," in Hooks Feed."),status:"info",duration:2e3,isClosable:!0}),(0,q.Ay)({actionName:"SongMenuShowInFeedToggled",context:{clipId:null==l?void 0:l.id,showInFeed:!t}})},[l,n]),c=o.checkGate("web-hooks-2025"),v=(null===(e=a.user)||void 0===e?void 0:e.id)===(null==l?void 0:l.user_id),p=l.is_public&&!!l.video_cover_url;return c&&v&&p?(0,i.Y)(tr,{keepMenusOpen:!0,icon:(0,i.Y)(eA.A,{}),onClick:s,enableForIncompleteClips:!0,children:(0,i.FD)("div",{className:"flex w-full flex-row items-center gap-2",children:[(0,i.Y)("span",{children:"Show in Hooks Feed"}),(0,i.Y)("div",{className:"ml-auto",children:(0,i.Y)(eJ.A,{small:!0,checked:(null===(t=l.metadata)||void 0===t?void 0:t.opt_out_video_cover_hook)!==!0,containerClassName:"pointer-events-none"})})]})}):null}),tX=()=>{var e,t,l,n;let r=(0,y.TF)(),{genForm:a}=(0,u.gy)(),s=(0,o.useRouter)(),c=(0,o.usePathname)(),v=w(eK.A),p=(0,eG.eX)(),m=e7(),h=(0,d.useCallback)(()=>{"/create"!==c&&"/studio"!==c&&s.push("/create?remix_clip="+r.id+"&remix_type=speed"),a.shouldOpenMobileCreate=!0,v(),p()},[a,v,p,c,s,r.id]);if(!m)return null;let g=["vox","artist_vox","vox_cover","vox_playlist_condition","vox_extend"].includes(null!==(n=null==r?void 0:null===(e=r.metadata)||void 0===e?void 0:e.task)&&void 0!==n?n:""),f=(null==r?void 0:null===(t=r.metadata)||void 0===t?void 0:t.type)==="upload"||!!(null==r?void 0:null===(l=r.metadata)||void 0===l?void 0:l.has_vocal)&&!g;return(0,i.Y)(T.m,{isDisabled:!f,label:"Cannot adjust speed of uploaded audio and its derivatives",children:(0,i.Y)(tr,{icon:(0,i.Y)(ek.A,{}),onClick:(0,q.c)({actionName:"SongMenuRemixAdjustSpeedClicked",context:{clipId:null==r?void 0:r.id}},h),disabled:f,"aria-label":"Adjust Speed",children:"Adjust Speed"})})},t$=()=>{let e=(0,y.TF)(),{clips:t,session:l}=(0,u.gy)(),{launchDialog:n}=(0,A.LN)(),{moveToTrash:r}=(0,e4.A)(),{t:a}=(0,s.Bd)(),o=(0,C.i7)(eZ.Ay,e=>e.selectedClipIds),c=(0,d.useCallback)(async l=>{l.stopPropagation(),l.preventDefault();let d=o.length>0?o:[e.id];if(d.length)if(d.some(e=>{let l=t.clipById[e];return null==l?void 0:l.is_public})){let e=d.map(e=>t.clipById[e]).filter(Boolean),l=e.some(e=>!!(null==e?void 0:e.has_hook)),o=e[0];if(await n((0,i.FD)("div",{className:"flex flex-col gap-2 pb-2",children:[(0,i.Y)(A.WE,{className:"text-foreground-primary",children:a("song.trashModalTitle",{count:e.length})}),(0,i.Y)(A.m1,{className:"leading-normal text-foreground-secondary",children:a(l?"song.trashModalBodyHook":"song.trashModalBody",{count:e.length})})]}),[{label:a("songActions.moveToTrash"),action:!0,autoFocus:!0},{label:a("cta.cancel"),action:!1,isCancel:!0}])){if(o){var s,c,u;(0,q.Ay)({actionName:"TrashSongModalMoveToTrashClicked",principalObjectType:"song",principalObjectValue:o.id,context:{selectedCount:d.length,...(null==o?void 0:null===(s=o.metadata.contest_ids)||void 0===s?void 0:s[0])&&{contestId:null!==(u=null==o?void 0:null===(c=o.metadata.contest_ids)||void 0===c?void 0:c[0])&&void 0!==u?u:null}}})}await r(d)}}else await r(d)},[e,o,t.clipById,n,r,a]),v=o.length>0?o:[e.id],p=v.every(e=>{var i;let n=t.clipById[e];return(null==n?void 0:n.user_id)===(null===(i=l.user)||void 0===i?void 0:i.id)}),m=v.some(e=>{let l=t.clipById[e];return!!(null==l?void 0:l.is_trashed)});if(!p||m)return null;let h=o.length>1?(0,eB.D)("Backspace"):void 0;return(0,i.Y)(tr,{icon:(0,i.Y)(ex.A,{}),onClick:(0,q.c)({actionName:"SongMenuMoveToTrashClicked",context:{clipId:null==e?void 0:e.id}},c),enableForIncompleteClips:!0,renderTags:h?()=>(0,i.Y)("span",{className:"ml-2 text-xs text-foreground-tertiary",children:h}):void 0,children:"Move to Trash"})},t0=()=>{let e=(0,y.TF)(),{clips:t,session:l}=(0,u.gy)(),n=(0,C.i7)(eZ.Ay,e=>e.selectedClipIds),{restoreFromTrash:r}=(0,e4.A)(),a=(0,d.useCallback)(async()=>{let t=n.length>0?n:[e.id];await r(t)},[e,n,r]),o=n.length>0?n:[e.id],s=o.every(e=>{var i;let n=t.clipById[e];return(null==n?void 0:n.user_id)===(null===(i=l.user)||void 0===i?void 0:i.id)}),c=o.every(e=>{let l=t.clipById[e];return!!(null==l?void 0:l.is_trashed)});if(!s||!c)return null;let v=n.length>1?(0,eB.D)("R"):void 0;return(0,i.Y)(tr,{icon:(0,i.Y)(eY.A,{}),onClick:(0,q.c)({actionName:"SongMenuRestoreToLibraryClicked",context:{clipId:null==e?void 0:e.id}},a),enableForIncompleteClips:!0,renderTags:v?()=>(0,i.Y)("span",{className:"ml-2 text-xs text-foreground-tertiary",children:v}):void 0,children:"Restore to Library"})},t1=()=>{var e,t,l,n;let r=(0,y.TF)(),{session:a}=(0,u.gy)(),{openModalWithData:o}=(0,I.k)(),s=e7(),c=(0,d.useCallback)(()=>{if(s){if(!(0,N.cA)(a,P.s$.Remaster)){o(k.H.UPSELL_MODAL,{feature:P.m.REMASTER});return}o(k.H.REMASTER_MODAL,{clipId:r.id})}},[r.id,s,o,a]);if((null===(e=r.metadata)||void 0===e?void 0:e.infill)||!s||r.is_trashed||r.user_id!==(null===(t=a.user)||void 0===t?void 0:t.id))return null;let v=(0,N.cA)(a,P.s$.Remaster),p=(null!==(n=null===(l=r.metadata)||void 0===l?void 0:l.duration)&&void 0!==n?n:0)>960;return(0,i.Y)(T.m,{isDisabled:!p,label:"Cannot remaster songs longer than 16 minutes",children:(0,i.Y)(tr,{icon:(0,i.Y)(eS.A,{}),onClick:(0,q.c)({actionName:"SongMenuRemasterClicked",context:{clipId:null==r?void 0:r.id}},c),disabled:!v||p,enableForIncompleteClips:!1,renderTags:()=>(0,i.Y)(S.Ay,{className:"ml-2",variant:S.qs.Pro,children:"Pro"}),children:"Remaster"})})},t2=()=>{var e;let t=(0,y.TF)(),{session:l}=(0,u.gy)(),n=(0,d.useCallback)(()=>{window.open("/b-side/describe-clip?clipId=".concat(null==t?void 0:t.id),"_blank")},[t]);if(!(0,N.Xl)(l)&&eq.O_)return null;let r=(null==t?void 0:t.user_id)!==(null===(e=l.user)||void 0===e?void 0:e.id);return(0,i.Y)(tr,{icon:(0,i.Y)(eM.A,{}),onClick:n,disabled:r,children:"Describe Clip"})},t5=()=>{let e=(0,y.TF)(),{session:t}=(0,u.gy)(),{onRemoveFromPlaylist:l}=(0,_.b)(),n=(0,d.useCallback)(()=>{l&&l()},[l]);return l?(0,i.Y)(tr,{icon:(0,i.Y)(eT.A,{}),onClick:(0,q.c)({actionName:"SongMenuRemoveFromPlaylistClicked",context:{clipId:null==e?void 0:e.id,isUserSongOwner:(null==t?void 0:t.userId)!==void 0&&(null==e?void 0:e.user_id)===(null==t?void 0:t.userId)}},n),enableForIncompleteClips:!0,children:"Remove from Playlist"}):null},t7=()=>{let e=(0,y.TF)(),{clips:t,session:l}=(0,u.gy)(),n=(0,d.useMemo)(()=>[e.id],[e.id]),r=(0,C.i7)(eZ.Ay,e=>0===e.selectedClipIds.length?n:e.selectedClipIds),{deletePermanently:a}=(0,e3.A)(),o=(0,d.useCallback)(()=>{a(r)},[a,r]),s=r.length>0?r:[e.id],c=s.every(e=>{var i;let n=t.clipById[e];return(null==n?void 0:n.user_id)===(null===(i=l.user)||void 0===i?void 0:i.id)}),v=s.every(e=>{let l=t.clipById[e];return!!(null==l?void 0:l.is_trashed)}),p=s.every(e=>{let l=t.clipById[e];return(null==l?void 0:l.status)==="complete"});if(!(c&&v&&p))return null;let m=r.length>1?(0,eB.D)("Backspace"):void 0;return(0,i.Y)(tr,{icon:(0,i.Y)(eI.A,{}),onClick:(0,q.c)({actionName:"SongMenuDeletePermanentlyClicked",context:{clipId:null==e?void 0:e.id}},o),enableForIncompleteClips:!0,renderTags:m?()=>(0,i.Y)("span",{className:"ml-2 text-xs text-foreground-tertiary",children:m}):void 0,children:"Delete Permanently"})},t3=()=>{let e=(0,y.TF)(),{clips:t,session:l,playbar:n}=(0,u.gy)(),r=(0,o.usePathname)(),a=(0,x.K)(),s=(0,d.useCallback)(async()=>{let l=!t.notInterestedById[e.id];(0,q.Ay)({actionName:"SongMenuNotInterestedClicked",context:{clipId:e.id,isNotInterested:l}});try{if(await t.updateSongNotInterested(e.id,l),l){var r;n.isPlaying&&(null===(r=n.clip)||void 0===r?void 0:r.id)===e.id&&n.canStepForward()&&n.stepForward(),(0,M.oR)({duration:2500,isClosable:!0,render:l=>{let{onClose:n}=l;return(0,i.Y)(eW,{content:"".concat(e.title||"Untitled"," will be hidden in future recommendations"),onUndo:async()=>{await t.updateSongNotInterested(e.id,!1)},onClose:n})}})}else(0,M.oR)({title:"".concat(e.title||"Untitled"," will be shown in future recommendations"),duration:4e3,isClosable:!0})}catch(e){(0,M.oR)({title:"Error updating song preferences",description:"Please try again later.",status:"error",duration:5e3,isClosable:!0})}},[e,t,n]),c=null==a?void 0:a.sectionName;if(!l.user||!r.includes("/on_repeat")&&(!c||c&&!["new_songs_for_you","featured_feed_for_you"].includes(c)))return null;let v=t.notInterestedById[e.id];return(0,i.Y)(tr,{icon:(0,i.Y)(e_.A,{}),onClick:s,enableForIncompleteClips:!0,"aria-label":"Not Interested",className:v?"bg-foreground-primary text-background-primary":"",children:"Not Interested"})},t9=()=>{let e=(0,y.TF)(),{openModalWithData:t}=(0,I.k)(),l=(0,d.useMemo)(()=>[e.id],[e.id]),n=(0,C.i7)(eZ.Ay,e=>0===e.selectedClipIds.length?l:e.selectedClipIds),r=(0,d.useCallback)(()=>{t(k.H.MODERATION_DELETE_CLIP,{clipIds:n,reason:"copyright_infringement"})},[t,n]);return(0,i.Y)(tr,{icon:(0,i.Y)(ed.A,{}),onClick:r,enableForIncompleteClips:!0,children:"Copyright Infringement"})},t4=()=>{let e=(0,y.TF)(),{openModalWithData:t}=(0,I.k)(),l=(0,d.useMemo)(()=>[e.id],[e.id]),n=(0,C.i7)(eZ.Ay,e=>0===e.selectedClipIds.length?l:e.selectedClipIds),r=(0,d.useCallback)(()=>{t(k.H.MODERATION_DELETE_CLIP,{clipIds:n,reason:"hate_violence"})},[t,n]);return(0,i.Y)(tr,{icon:(0,i.Y)(ed.A,{}),onClick:r,enableForIncompleteClips:!0,children:"Hate or Violence"})},t6=()=>{let e=(0,y.TF)(),{openModalWithData:t}=(0,I.k)(),l=(0,d.useMemo)(()=>[e.id],[e.id]),n=(0,C.i7)(eZ.Ay,e=>0===e.selectedClipIds.length?l:e.selectedClipIds),r=(0,d.useCallback)(()=>{t(k.H.MODERATION_DELETE_CLIP,{clipIds:n,reason:"sexual_content"})},[t,n]);return(0,i.Y)(tr,{icon:(0,i.Y)(ed.A,{}),onClick:r,enableForIncompleteClips:!0,children:"Sexual Content"})},t8=()=>{let e=(0,y.TF)(),{openModalWithData:t}=(0,I.k)(),l=(0,d.useMemo)(()=>[e.id],[e.id]),n=(0,C.i7)(eZ.Ay,e=>0===e.selectedClipIds.length?l:e.selectedClipIds),r=(0,d.useCallback)(()=>{t(k.H.MODERATION_DELETE_CLIP,{clipIds:n,reason:"other"})},[t,n]);return(0,i.Y)(tr,{icon:(0,i.Y)(ed.A,{}),onClick:r,enableForIncompleteClips:!0,children:"Other"})},le=()=>{var e;let t=(0,y.TF)(),{session:l}=(0,u.gy)(),{openModalWithData:n}=(0,I.k)(),a=(0,r.useStatsigClient)(),o=e7(),s=a.checkGate("enable-marketplace"),c=(0,d.useCallback)(()=>{n(k.H.MARKETPLACE_CREATE_PROJECT,{clipId:t.id,clipTitle:(null==t?void 0:t.title)||"Untitled",clipUrl:(null==t?void 0:t.audio_url)||""})},[t,n]);return l.user&&s&&(null===(e=l.user)||void 0===e?void 0:e.id)===(null==t?void 0:t.user_id)&&o&&(null==t||!t.is_trashed)?(0,i.Y)(tr,{icon:(0,i.Y)(es.A,{}),onClick:(0,q.c)({actionName:"SongMenuCreateMarketplaceProjectClicked",context:{clipId:null==t?void 0:t.id}},c),enableForIncompleteClips:!1,children:"Hire an Editor"}):null}},69913:(e,t,l)=>{l.d(t,{A:()=>n});var i=l(93519);let n=e=>(0,i.Y)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 24 24",fill:"currentColor",...e,children:(0,i.Y)("g",{children:(0,i.Y)("g",{children:(0,i.Y)("path",{d:"M9.495 11.527c1.035 0 1.915-.372 2.65-1.109.735-.736 1.107-1.627 1.107-2.654 0-1.028-.372-1.919-1.107-2.655S10.521 4 9.495 4s-1.914.373-2.65 1.11c-.734.735-1.106 1.626-1.106 2.654 0 1.027.372 1.918 1.107 2.654.735.737 1.624 1.11 2.65 1.11M13.506 11.29a5.25 5.25 0 0 0 1.334-3.526c0-1.337-.453-2.51-1.325-3.5-.036-.037-.027-.119.01-.128.308-.081.617-.136.952-.136 1.026 0 1.915.373 2.65 1.11.735.735 1.107 1.626 1.107 2.654 0 1.027-.372 1.918-1.107 2.654-.735.737-1.615 1.11-2.65 1.11-.335 0-.644-.046-.943-.128-.028-.01-.055-.082-.028-.11M20.485 13.927c.544.282.962.71 1.243 1.291h.009c.181.373.263.782.263 1.2v1.691c0 .518-.181.955-.553 1.327a1.78 1.78 0 0 1-1.325.555h-1.879c-.09 0-.136-.091-.09-.164.299-.518.453-1.09.453-1.718v-1.69a4.36 4.36 0 0 0-1.806-3.555c-.127-.082-.118-.191 0-.173.245.045.481.09.726.145a14 14 0 0 1 2.959 1.091M12.554 12.836c.998.237 1.987.61 2.958 1.091h.018q.681.357 1.089 1.027t.408 1.473v1.691c0 .518-.19.955-.553 1.328a1.78 1.78 0 0 1-1.325.554H3.879c-.518 0-.953-.182-1.325-.555A1.79 1.79 0 0 1 2 18.118v-1.69q0-.805.408-1.474a2.7 2.7 0 0 1 1.09-1.027c.97-.482 1.96-.845 2.958-1.09a12.8 12.8 0 0 1 3.049-.364c1.025 0 2.05.127 3.048.363"})})})})},70112:(e,t,l)=>{l.d(t,{A:()=>o});var i=l(76790),n=l(52471),r=l(86688),a=l(62972);function o(){let{menus:e}=(0,n.gy)(),{openModal:t}=(0,a.k)();return{deletePermanently:(0,i.useCallback)(l=>{e.setSelected(new Set(l)),t(r.H.DELETE_CLIP)},[e,t])}}},70441:(e,t,l)=>{l.d(t,{A:()=>n});var i=l(93519);let n=e=>(0,i.Y)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 24 24",fill:"currentColor",...e,children:(0,i.Y)("g",{children:(0,i.Y)("g",{children:(0,i.Y)("path",{d:"M15.133 3.599a8.35 8.35 0 0 0-4.007-.55 8.88 8.88 0 0 0-5.854 3.17l-.28.344-.065-.575a.903.903 0 0 0-.994-.796.9.9 0 0 0-.796.993L3.44 8.92c0 .037.013.07.027.105l.022.059.014.057q.013.058.035.115.002.014.016.023.01.008.017.018.076.134.189.23s0 .009.008.017q.039.026.082.045l.025.012c.05.033.098.066.156.09q.04.015.076.018l.039.007a.7.7 0 0 0 .189.033h.098l2.75-.304a.9.9 0 0 0 .797-.993.91.91 0 0 0-.993-.797l-.583.066.27-.337a7.04 7.04 0 0 1 4.656-2.52 6.46 6.46 0 0 1 3.129.426.904.904 0 0 0 1.174-.5.904.904 0 0 0-.5-1.175zM20.692 6.982l-2.52-1.1a.9.9 0 0 0-.354-.082 1 1 0 0 0-.353.057.95.95 0 0 0-.5.476l-1.11 2.53a.904.904 0 1 0 1.66.722l.237-.542.156.402a7.08 7.08 0 0 1-.14 5.296 6.5 6.5 0 0 1-1.929 2.505.9.9 0 0 0-.156 1.264c.18.23.444.345.715.345a.93.93 0 0 0 .558-.189 8.3 8.3 0 0 0 2.471-3.202 8.9 8.9 0 0 0 .173-6.66l-.164-.41.525.23a.904.904 0 1 0 .723-1.659zM13.984 18.888a1 1 0 0 1-.033.09v.008l-.014.047a1 1 0 0 1-.068.183.4.4 0 0 0-.05.058 1 1 0 0 1-.172.197c-.017.008-.017.016-.017.016l-2.192 1.684a.88.88 0 0 1-.55.189.902.902 0 0 1-.55-1.618l.46-.353-.435-.058a8.9 8.9 0 0 1-5.756-3.358 8.4 8.4 0 0 1-1.61-3.711.907.907 0 0 1 .747-1.035.9.9 0 0 1 1.035.747 6.5 6.5 0 0 0 1.264 2.899 7.07 7.07 0 0 0 4.574 2.668l.435.058-.361-.468a.902.902 0 0 1 1.429-1.1l1.683 2.192a.88.88 0 0 1 .18.665"})})})})},72314:(e,t,l)=>{l.d(t,{A:()=>n});var i=l(93519);let n=e=>(0,i.Y)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 24 24",fill:"currentColor",...e,children:(0,i.Y)("g",{children:(0,i.Y)("path",{d:"M16 5.825v5l1.7 1.7q.15.15.225.337t.075.388v.575q0 .424-.288.712a.97.97 0 0 1-.712.288h-4v4.85q0 .424-.287.712a.97.97 0 0 1-.713.288.97.97 0 0 1-.713-.288.97.97 0 0 1-.287-.712v-4.85H7a.97.97 0 0 1-.713-.288.97.97 0 0 1-.287-.712v-.575q0-.2.075-.388a1 1 0 0 1 .225-.337l1.7-1.7v-5a.97.97 0 0 1-.713-.288A.97.97 0 0 1 7 4.825q0-.425.287-.713A.97.97 0 0 1 8 3.825h8q.424 0 .712.287.288.288.288.713 0 .424-.288.712a.97.97 0 0 1-.712.288"})})})},73167:(e,t,l)=>{l.d(t,{A:()=>n});var i=l(93519);let n=e=>(0,i.Y)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 24 24",fill:"currentColor",...e,children:(0,i.Y)("g",{children:(0,i.Y)("path",{d:"m12 18.136-3.9 1.696q-.928.4-1.764-.153-.836-.555-.836-1.567V5.885q0-.778.546-1.331Q6.59 3.999 7.357 4h9.286q.766 0 1.311.554.546.553.546 1.33v12.228q0 1.013-.836 1.567-.835.554-1.764.153z"})})})},73841:(e,t,l)=>{l.d(t,{A:()=>o});var i=l(76790),n=l(52471),r=l(4709),a=l(85667);function o(){let{clips:e}=(0,n.gy)(),t=(0,r.i7)(a.vJ,e=>e.clipChanged),l=(0,i.useCallback)(async(l,i)=>{let n=e.likeClip(l,i);t(e.clipById[l]),await n},[e]);return{setClipLiked:l,setClipDisliked:(0,i.useCallback)(async(l,i)=>{let n=e.dislikeClip(l,i);t(e.clipById[l]),await n},[e]),incrementClipPlayCount:(0,i.useCallback)(l=>{let i=e.clipById[l];i&&(i.play_count=(i.play_count||0)+1,t(i))},[e.clipById])}}},75245:(e,t,l)=>{l.d(t,{S:()=>n,f:()=>i});var i=function(e){return e.Genre="genre",e.Instrument="instrument",e.Vocal="vocal",e.Mood="mood",e.Era="era",e.Production="production",e.Other="other",e}({});let n={genre:"Genres",instrument:"Instruments",vocal:"Vocals",mood:"Moods",era:"Eras",production:"Production Styles",other:"Other"}},75287:(e,t,l)=>{l.d(t,{A:()=>n});var i=l(93519);let n=e=>(0,i.Y)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 24 24",fill:"currentColor",...e,children:(0,i.Y)("g",{children:(0,i.Y)("path",{d:"M12 7.496a.88.88 0 0 0-.638.26.88.88 0 0 0-.261.639c0 .251.09.467.26.638.172.17.387.26.639.26s.467-.09.638-.26.261-.387.261-.638a.88.88 0 0 0-.26-.639.88.88 0 0 0-.639-.26m0 3.146c-.495 0-.9.405-.9.9v4.045c0 .495.406.9.9.9.495 0 .9-.405.9-.9v-4.046c0-.494-.405-.899-.9-.899M12 3c1.24 0 2.41.234 3.507.71a9 9 0 0 1 2.859 1.924 9.2 9.2 0 0 1 1.924 2.86A8.9 8.9 0 0 1 21 12q.002 1.86-.71 3.507a9.2 9.2 0 0 1-1.924 2.859 9.2 9.2 0 0 1-2.86 1.924A8.9 8.9 0 0 1 12 21q-1.861.002-3.506-.71a9.3 9.3 0 0 1-2.86-1.924 9.2 9.2 0 0 1-1.924-2.86A8.9 8.9 0 0 1 3 12c0-1.24.234-2.41.71-3.506a9.3 9.3 0 0 1 1.924-2.86 9.2 9.2 0 0 1 2.86-1.924A8.7 8.7 0 0 1 12 3"})})})},75897:(e,t,l)=>{l.d(t,{Ay:()=>k,N$:()=>Y,Rd:()=>S,kn:()=>M,w_:()=>_});var i=l(93519),n=l(25784),r=l(84741),a=l(82281),o=l(28420),d=l(12358),s=l(76790),c=l(546),u=l(52471),v=l(4709),p=l(72793),m=l(43257),h=l(69181),g=l(56090),f=l(67013),y=l(75040),C=l(7213),w=l(81299),b=l(73841),A=l(50999);function k(e,t){var l,i,n,r,a;let{incrementClipPlayCount:o}=(0,b.A)(),d=(0,f.g)(),{playbar:y,queue:C}=(0,u.gy)(),k=(0,v.i7)(w.kT,e=>e?e.playContext:null),x=t||k,[Y,S]=(0,c.Fo)("".concat(null!==(a=null==e?void 0:e.id)&&void 0!==a?a:"NO_CLIP_ID","-will-play"),!1),M=(null===(l=y.clip)||void 0===l?void 0:l.id)!==void 0&&(null===(i=y.clip)||void 0===i?void 0:i.id)===(null==e?void 0:e.id),T=y.isPlaying&&M,I=(0,s.useCallback)(e=>{y.setStopAtSeconds(e)},[y]),_=(0,s.useCallback)(()=>{if(M){var t,l;return y.getCurrentTime()/(null!==(l=null==e?void 0:null===(t=e.metadata)||void 0===t?void 0:t.duration)&&void 0!==l?l:0)}return 0},[M,null==e?void 0:null===(n=e.metadata)||void 0===n?void 0:n.duration]),P=(0,p.A)(y.userSetCurrentProgressWithTime,50),N=(0,s.useCallback)(function(t){let{preserveStopAt:l}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(M){var i,n;P(t*(null!==(n=null==e?void 0:null===(i=e.metadata)||void 0===i?void 0:i.duration)&&void 0!==n?n:0),{preserveStopAt:l})}},[M,null==e?void 0:null===(r=e.metadata)||void 0===r?void 0:r.duration,P]);(0,s.useEffect)(()=>{(!e||M)&&S(!1)},[e,M]),(0,s.useEffect)(()=>{T||S(!1)},[T]);let[,F]=(0,A.A)(e),E=(0,s.useCallback)(async t=>{var l,i;if(!e||!["streaming","complete"].includes(e.status||""))return;F(!0),T?S(!1):S(!0),await (0,g.yy)(1);let n=!1;if(!T&&d&&(n=!d.markClipPlayedAndCheckIfFirst(e.id)),M)(null==t?void 0:t.startAtSeconds)===void 0||T||y.userSetCurrentProgressWithTime(t.startAtSeconds),y.togglePlay();else{let i=null!==(l=null==t?void 0:t.startAtSeconds)&&void 0!==l?l:0;y.playClip(e,void 0,void 0,!1,i,n);let r=x||{currentIndex:0,clips:C.getClipsForContext(m.E.Song,e.id),contextType:m.E.Song,contextId:e.id};C.setPlayContext((0,h.Q)(r,e.id))}if(T||n||o(e.id),!T&&(null==t?void 0:t.stopAtSeconds)!==void 0){let e=null!==(i=null==t?void 0:t.startAtSeconds)&&void 0!==i?i:y.getCurrentTime();t.stopAtSeconds>e&&y.setStopAtSeconds(t.stopAtSeconds)}},[F,e,o,d,y,k,C.getClipsForContext,C.setPlayContext,T,M]);return(0,s.useEffect)(()=>{T&&F(!0)},[T,F]),(0,s.useMemo)(()=>({getCurrentProgress:_,setCurrentProgress:N,onPlayClick:E,setStopAtSeconds:I,isPlaying:T,willPlay:Y,isLoadedIntoPlayer:M}),[E,I,T,Y,M,_,N])}let x=(0,v.q6)({isPlaying:!1,isLoadedIntoPlayer:!1,willPlay:!1,onPlayClick:async()=>{},setStopAtSeconds:()=>{},getCurrentProgress:()=>0,setCurrentProgress:()=>{}});function Y(e){let{value:t,children:l}=e;return(0,i.Y)(x.Provider,{value:t,children:l})}let S=(e,t)=>{var l,i,d,u;let p=(0,v.i7)(y.Ay,e=>!!e),{incrementClipPlayCount:m}=(0,b.A)(),h=(0,f.g)(),g=(0,v.i7)(y.Ay,e=>e?e.previewController.previewOffTimeline:null),w=(0,v.i7)(y.Ay,e=>e?(0,a.MA)(e.heardState):null),k=(0,v.i7)(y.Ay,e=>e?e.playbackController.play:null),x=(0,v.i7)(y.Ay,e=>e?e.playbackController.stop:null),Y=(0,v.i7)(y.Ay,e=>e?e.playbackController.stopAt:null),S=(0,v.i7)(y.Ay,e=>e?e.playbackController.clearStopAt:null),M=(0,v.i7)(y.Ay,e=>e?e.playbackController.playing:null),T=(0,v.i7)(y.Ay,e=>e?(0,a.MA)(e.heardState):null),I=(0,v.i7)(y.Ay,t=>{var l;return!!(t&&e?(null===(l=t.previewController.previewPackage)||void 0===l?void 0:l.id)===e.id:null)}),_=(0,v.i7)(y.Ay,t=>{if(!t)return null;let l=(0,a.aJ)(t.heardState);return l&&l.clipId===(null==e?void 0:e.id)?l:null}),[P,N]=(0,c.Fo)("".concat(null!==(d=null==e?void 0:e.id)&&void 0!==d?d:"NO_CLIP_ID","-will-play-studio"),!1),F=(0,s.useMemo)(()=>!!(I&&M),[I,M]),E=(0,v.i7)(y.Ay,e=>e?e.playbackController.getCurrentBeats:()=>0),L=(0,s.useCallback)(()=>{if(I&&w&&_){let t=e?(0,C.aS)(e):0;if(!t)return 0;let l=(0,o.hh)(_.warp)||0!==_.readStartBeats||_.warp.markers[0]?(0,r.A)(w,_,E(),!0)[0]:E(),i=(0,o.$s)(_.warp,l);if(!Number.isFinite(i))return 0;let n=Math.max(0,Math.min(1,i/t));return Number.isNaN(n)?0:n}return 0},[I,E,w,_,null==e?void 0:null===(l=e.metadata)||void 0===l?void 0:l.duration]),D=(0,v.i7)(y.Ay,e=>e?e.playbackController.seek:()=>void 0),O=(0,s.useCallback)(t=>{if(D&&I&&_&&T){let l=e?(0,C.aS)(e):0,i=(0,o.rk)(_.warp,t*l);D(Math.max(_.startBeats,Math.min(_.endBeats,(0,n.A)(T,_,i,!0))))}},[T,I,D,_,null==e?void 0:null===(i=e.metadata)||void 0===i?void 0:i.duration]),[,R]=(0,A.A)(e),[q,B]=(0,c.Fo)("".concat(null!==(u=null==e?void 0:e.id)&&void 0!==u?u:"NO_CLIP_ID","-buffer-is-loading"),!1),H=(0,s.useCallback)(e=>{if(null===e){null==S||S();return}if(!_||!T)return;let t=(0,o.rk)(_.warp,e),l=(0,n.A)(T,_,t,!0);null==Y||Y(l)},[_,T,Y,S]),U=(0,s.useCallback)(async l=>{var i,n,r,a;e&&(R(!0),F?(N(!1),null==x||x(!0)):I?(N(!0),(null==l?void 0:l.startAtSeconds)!==void 0&&O(l.startAtSeconds/(null!==(n=null===(i=e.metadata)||void 0===i?void 0:i.duration)&&void 0!==n?n:1)),(null==l?void 0:l.stopAtSeconds)!==void 0&&H(l.stopAtSeconds),null==k||k()):(N(!0),B(!0),await (null==g?void 0:g(e,t)),B(!1),(null==l?void 0:l.startAtSeconds)!==void 0&&O(l.startAtSeconds/(null!==(a=null===(r=e.metadata)||void 0===r?void 0:r.duration)&&void 0!==a?a:1)),(null==l?void 0:l.stopAtSeconds)!==void 0&&H(l.stopAtSeconds)),!F&&(h?h.markClipPlayedAndCheckIfFirst(e.id)&&m(e.id):m(e.id)))},[R,L,O,H,m,h,g,F,k,x,e]);return(0,s.useEffect)(()=>{I||q?N(!0):N(!1)},[I,q]),(0,s.useEffect)(()=>{F&&R(!0)},[F,R]),(0,s.useMemo)(()=>({onPlayClick:U,setStopAtSeconds:H,isLoadedIntoPlayer:I,isPlaying:F,willPlay:P,getCurrentProgress:L,setCurrentProgress:O}),[p,U,H,F,I,P,L,O])},M=e=>{let{children:t,clip:l,studioPreviewsWithContextWindow:n,playContext:r}=e;return(0,v.i7)(y.Ay,e=>!!e)?(0,i.Y)(I,{clip:l,studioPreviewsWithContextWindow:n,children:t}):(0,i.Y)(T,{clip:l,playContext:r,children:t})},T=(0,d.PA)(e=>{let{children:t,clip:l,playContext:n}=e;return(0,i.Y)(Y,{value:k(l,n),children:t})}),I=e=>{let{children:t,clip:l,studioPreviewsWithContextWindow:n}=e;return(0,i.Y)(Y,{value:S(l,n),children:t})},_=()=>(0,v.NT)(x)},76619:(e,t,l)=>{l.d(t,{A:()=>n});var i=l(93519);let n=e=>(0,i.Y)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 24 24",fill:"currentColor",...e,children:(0,i.Y)("g",{children:(0,i.Y)("g",{children:(0,i.Y)("path",{d:"m9.35 8.232-2.446.244a.865.865 0 0 0-.78.859v7.558a3 3 0 0 0-.521-.042C4.165 16.851 3 17.78 3 18.926 3 20.07 4.165 21 5.603 21c1.437 0 2.602-.929 2.602-2.074v-6.431l4.77-.475a3 3 0 0 1-.077-.173l-.572-1.395-1.4-.57a2.7 2.7 0 0 1-1.576-1.65M14.452 13.38v2.475a3 3 0 0 0-.521-.041c-1.437 0-2.603.929-2.603 2.074 0 1.146 1.166 2.075 2.603 2.075s2.603-.929 2.603-2.075V13.36a2.86 2.86 0 0 1-2.082.02M10.96 7.56a1.02 1.02 0 0 1 .647-1.004l1.67-.68a1.04 1.04 0 0 0 .57-.567l.682-1.664c.352-.86 1.575-.86 1.927 0l.682 1.664c.106.258.311.463.57.568l1.67.68c.344.14.551.417.621.722.017.407-.199.822-.646 1.004l-1.67.68c-.26.105-.465.31-.57.568l-.682 1.663c-.353.86-1.576.86-1.928 0l-.682-1.663a1.04 1.04 0 0 0-.57-.569l-1.67-.679a1.02 1.02 0 0 1-.62-.723"})})})})},76909:(e,t,l)=>{l.d(t,{A:()=>n});var i=l(93519);let n=e=>(0,i.Y)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 24 24",fill:"currentColor",...e,children:(0,i.Y)("g",{children:(0,i.Y)("path",{d:"M9 20a1 1 0 0 1-1 1H5q-.824 0-1.412-.587A1.93 1.93 0 0 1 3 19v-7q0-1.874.712-3.512a9.2 9.2 0 0 1 1.926-2.85 9.2 9.2 0 0 1 2.85-1.925A8.7 8.7 0 0 1 12 3q1.874 0 3.512.712a9.2 9.2 0 0 1 2.85 1.926 9.2 9.2 0 0 1 1.926 2.85A8.7 8.7 0 0 1 21 12v7q0 .824-.587 1.413A1.93 1.93 0 0 1 19 21h-3a1 1 0 0 1-1-1v-6a1 1 0 0 1 1-1h3v-1q0-2.925-2.038-4.962T12 5 7.038 7.037 5 12v1h3a1 1 0 0 1 1 1z"})})})},78373:(e,t,l)=>{l.d(t,{A:()=>n});var i=l(93519);let n=e=>(0,i.Y)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 24 24",fill:"currentColor",...e,children:(0,i.Y)("g",{children:(0,i.Y)("path",{d:"M12 22a9.7 9.7 0 0 1-3.9-.788 10.1 10.1 0 0 1-3.175-2.137q-1.35-1.35-2.137-3.175A9.7 9.7 0 0 1 2 12q0-1.55.425-2.937A9.8 9.8 0 0 1 3.65 6.475L1.375 4.2q-.3-.3-.3-.713 0-.412.3-.712t.713-.3.712.3l18.4 18.4q.3.3.3.7t-.3.7-.712.3a.97.97 0 0 1-.713-.3l-2.25-2.225q-1.2.8-2.587 1.225A10 10 0 0 1 12 22m-1-2.05V18q-.825 0-1.412-.587A1.93 1.93 0 0 1 9 16v-1l-4.8-4.8q-.074.45-.137.9T4 12q0 3.025 1.988 5.3T11 19.95M22 12q0 1.125-.25 2.162a11.4 11.4 0 0 1-.675 1.988.87.87 0 0 1-.562.463.92.92 0 0 1-.738-.088 1.06 1.06 0 0 1-.487-.6 1 1 0 0 1 .037-.775q.326-.75.5-1.537A7.4 7.4 0 0 0 20 12a7.84 7.84 0 0 0-1.362-4.475A7.7 7.7 0 0 0 15 4.6V5q0 .824-.587 1.412A1.93 1.93 0 0 1 13 7h-1.5v.425q0 .35-.3.475t-.55-.125L7.7 4.825q-.45-.45-.362-1.075T8 2.85a9 9 0 0 1 1.925-.638A10 10 0 0 1 12 2q2.076 0 3.9.788a10.1 10.1 0 0 1 3.175 2.137q1.35 1.35 2.138 3.175A9.7 9.7 0 0 1 22 12"})})})},80336:(e,t,l)=>{l.d(t,{d:()=>o,j:()=>a});var i=l(86688),n=l(77310),r=l(42078);let a=e=>{let{clipIsPrivate:t,pinnedCount:l,isPublishFlow:i=!1,maxPins:n=5}=e,r=!1,a=l>=n,o="Pin limit reached!",d="You can only pin up to ".concat(n," songs to your Profile. Pinning this song will replace your oldest pinned song");return a&&t&&!i?(d="You can only pin up to ".concat(n," songs to your Profile. Pinning this song will replace your oldest pinned song and make this song Public"),r=!0):a?(d="You can only pin up to ".concat(n," songs to your Profile. Pinning this song will replace your oldest pinned song"),r=!0):t&&!i&&(o="Pinning Private Song!",d="Pinning a private song will make it public. Are you sure you want to continue?",r=!0),{title:o,message:d,showModal:r}},o=async e=>{var t;let{clip:l,clips:o,openModalWithData:d,session:s}=e,c=!l.is_public,u=o.getPinnedCount(),v=o.isClipPinned(l.id),{title:p,message:m,showModal:h}=a({clipIsPrivate:c,pinnedCount:u,maxPins:(null===(t=s.flags)||void 0===t?void 0:t["artist-profiles"])?r.xlc:r.p1y});!v&&h?d(i.H.CONFIRM_PIN_REPLACEMENT,{clipId:l.id,title:p,message:m}):(await o.pinClipToProfile({clipId:l.id}),(0,n.oR)({title:"This song has been ".concat(v?"unpinned from Profile":"pinned to Profile","."),duration:2e3,isClosable:!0}))}},81218:(e,t,l)=>{l.d(t,{Qe:()=>s,TF:()=>v,ob:()=>c,pf:()=>p});var i=l(93519),n=l(12358),r=l(76790),a=l(52471),o=l(4709);let d=(0,o.q6)(null),s=()=>(0,o.NT)(d),c=(0,r.memo)(function(e){let{children:t,clip:l=null}=e;return(0,i.Y)(d.Provider,{value:l,children:t})}),u=(0,o.q6)(void 0),v=()=>(0,o.NT)(u),p=(0,n.PA)(function(e){let{children:t,clip:l}=e,{clips:n}=(0,a.gy)(),r=n.clipById[null==l?void 0:l.id];return(0,i.Y)(u.Provider,{value:r,children:(0,i.Y)(c,{clip:r,children:t})})})},81299:(e,t,l)=>{l.d(t,{kT:()=>M,h8:()=>T});var i=l(93519),n=l(599),r=l(79666),a=l(71010),o=l(98150),d=l(68980),s=l(3372),c=l(76790),u=l(546),v=l(52471),p=l(77310),m=l(4709),h=l(43257),g=l(59997),f=l(1452),y=l(63162),C=l(74557),w=l(58981),b=l(28508);function A(e){let t=!(arguments.length>1)||void 0===arguments[1]||arguments[1];return t&&e.ids.presence===b.L.True?{ids:e.ids}:Object.fromEntries(Object.entries(e).filter(e=>{let[t,l]=e;return!(0,d.A)(w.Jb[t],l)}))}let k=e=>e?(e,t)=>new Date(t.created_at).getTime()-new Date(e.created_at).getTime():(e,t)=>new Date(e.created_at).getTime()-new Date(t.created_at).getTime(),x=e=>e?(e,t)=>{var l,i;return(null!==(l=t.play_count)&&void 0!==l?l:0)-(null!==(i=e.play_count)&&void 0!==i?i:0)}:(e,t)=>{var l,i;return(null!==(l=e.play_count)&&void 0!==l?l:0)-(null!==(i=t.play_count)&&void 0!==i?i:0)},Y=e=>e?(e,t)=>{var l,i;return(null!==(l=t.upvote_count)&&void 0!==l?l:0)-(null!==(i=e.upvote_count)&&void 0!==i?i:0)}:(e,t)=>{var l,i;return(null!==(l=e.upvote_count)&&void 0!==l?l:0)-(null!==(i=t.upvote_count)&&void 0!==i?i:0)};var S=l(85667);let M=(0,m.q6)(void 0),T=e=>{let{children:t,getDefaultFilters:l,fetchClips:w,endpointKey:b,getClipAtOffset:T,memorizeFilters:I}=e,{clips:_}=(0,v.gy)(),P=(0,c.useCallback)(async e=>{var t,l;let{cursor:i,limit:n,filters:r}=e,a=await _.apiClient.POST("/api/feed/v3",{body:{cursor:i,limit:n,filters:r}});if(a.error)throw console.error("Error fetching clips",a,a.error),Error(JSON.stringify(a.error));return{clips:(null===(t=a.data)||void 0===t?void 0:t.clips)||[],nextCursor:(null===(l=a.data)||void 0===l?void 0:l.next_cursor)||null}},[_.apiClient]),N=(0,c.useCallback)(async(e,t)=>{let l=await _.apiClient.POST("/api/feed/v3/offset",{body:{offset:e,filters:t}});if(l.error)throw Error(l.error);return l.data},[_.apiClient]),F=function(e,t,l,i){var w,b,M,T,I;let _=arguments.length>4&&void 0!==arguments[4]?arguments[4]:20,P=arguments.length>5&&void 0!==arguments[5]?arguments[5]:350,N=arguments.length>6&&void 0!==arguments[6]&&arguments[6],{clips:F,session:E}=(0,v.gy)(),L=(0,s.usePathname)(),D="sept-12-2025-clip-browser-filters-".concat(L,"-").concat(E.userId),[O,R]=(0,u.Mj)(D,e),[q,B]=(0,c.useState)(O);(0,c.useEffect)(()=>{R(q)},[q]);let H=(0,n.useQueryClient)(),U=function(){let{project:e}=(0,v.gy)();return(0,c.useCallback)(async(t,l)=>{var i;t.project&&await e.pinClipToProject([t],null===(i=t.project)||void 0===i?void 0:i.id,l)},[e.isPinned,e.pinClipToProject])}(),[V,j]=(0,c.useState)(!1),[z,G]=(0,c.useState)(null),[J,Q]=(0,c.useState)(null),[W,Z]=(0,c.useState)(0),[K]=(0,u.Q3)(q,P),X=(0,c.useCallback)(async(e,t)=>{if(!i)throw Error("Offset-based pagination not supported by this endpoint");return i(e,A(t))},[i]),$=(0,r.useInfiniteQuery)({queryKey:[K,t,_,V?"page":"infinite",z,W],staleTime:3e5,gcTime:(0,g.j)(3e5),refetchOnMount:e=>{var t;return(null===(t=e.state.data)||void 0===t?void 0:t.pages.length)!==0||"always"},retry:(e,l)=>(console.error("Error fetching ".concat(t," clips"),l),!(e>3)||((0,p.oR)({title:"Error fetching ".concat(t," clips"),description:l.message,status:"error"}),!1)),retryDelay:2e3,queryFn:async e=>{var t;let{pageParam:i=null}=e,n=A(K),r=await l({cursor:V?J:i,limit:_,filters:n});return null===(t=r.clips)||void 0===t||t.forEach(e=>{F.updateClips([e])}),{filters:K,clips:r.clips.map(e=>e.id)||[],nextCursor:r.nextCursor||null,isPageMode:V,pageNumber:z}},getNextPageParam:e=>V?null:e.nextCursor,initialPageParam:V?J:null},y.S),[ee,et]=(0,c.useState)([]),el=(0,c.useMemo)(()=>{var e,t,l,i,n;return V&&(null===(t=$.data)||void 0===t?void 0:null===(e=t.pages)||void 0===e?void 0:e.length)?(null===(n=$.data.pages[0])||void 0===n?void 0:n.clips)||[]:[...new Set((null===(i=$.data)||void 0===i?void 0:null===(l=i.pages)||void 0===l?void 0:l.flatMap(e=>e.clips))||[])]},[null===(w=$.data)||void 0===w?void 0:w.pages,V]),ei=(0,c.useRef)(null),en=q.workspace.workspaceId||null,er=(0,a.useQuery)({queryKey:["workspacePins",en],queryFn:async()=>{var e,t;let l=await F.apiClient.GET("/api/project/{project_id}/pinned-clips",{params:{path:{project_id:null!=en?en:""}}});if(l.error)throw Error(l.error);return{clips:null!==(t=null===(e=l.data)||void 0===e?void 0:e.pinned_clips)&&void 0!==t?t:[]}},enabled:!!en,gcTime:(0,g.j)(0)}),ea=(0,o.useMutation)({mutationFn:async e=>await U(e,!1),onMutate:async e=>{await H.cancelQueries({queryKey:["workspacePins",en]});let t=H.getQueryData(["workspacePins",en]);return H.setQueryData(["workspacePins",en],t=>t?{...t,clips:t.clips.filter(t=>t.id!==e.id)}:t),{previousPins:t}},onError:(e,t,l)=>{(null==l?void 0:l.previousPins)&&H.setQueryData(["workspacePins",en],l.previousPins)},onSettled:()=>{H.invalidateQueries({queryKey:["workspacePins",en]})}}),eo=(0,o.useMutation)({mutationFn:async e=>await U(e,!0),onMutate:async e=>{await H.cancelQueries({queryKey:["workspacePins",en]});let t=H.getQueryData(["workspacePins",en]);return H.setQueryData(["workspacePins",en],t=>t?{...t,clips:[...t.clips,e].sort((e,t)=>new Date(e.created_at).getTime()-new Date(t.created_at).getTime())}:t),{previousPins:t}},onError:(e,t,l)=>{(null==l?void 0:l.previousPins)&&H.setQueryData(["workspacePins",en],l.previousPins)},onSettled:()=>{H.invalidateQueries({queryKey:["workspacePins",en]})}});(0,c.useEffect)(()=>{var e;(null===(e=er.data)||void 0===e?void 0:e.clips)&&er.data.clips.forEach(e=>{F.updateClips([e])})},[er.data]);let ed=(0,c.useMemo)(()=>{var e,t;return null!==(t=null===(e=er.data)||void 0===e?void 0:e.clips)&&void 0!==t?t:[]},[null===(b=er.data)||void 0===b?void 0:b.clips]);(0,c.useEffect)(()=>{en!==ei.current&&(et([]),ei.current=en)},[en]),(0,c.useEffect)(()=>{el&&!$.isFetching&&et(el)},[el,$.isFetching]);let es=(0,c.useRef)(e);(0,c.useEffect)(()=>{es.current===e&&N||(B(e()),es.current=e)},[e,N]);let ec=(0,C.A)(),{clips:eu}=(0,f.X)(ee),ev=(0,c.useMemo)(()=>ee.filter(e=>!eu[e]||ec(eu[e],q)&&"error"!==eu[e].status),[ee,q,eu,ec]),ep=(0,c.useCallback)(e=>{et(t=>t.includes(e.id)&&!ec(e,q)?t.filter(t=>t!==e.id):!t.includes(e.id)&&ec(e,q)?[e.id,...t].map(t=>t===e.id?e:eu[t]).filter(Boolean).sort(function(e){switch(e.sortBy){case"created_at":return k("desc"===e.sortDirection);case"play_count":return x("desc"===e.sortDirection);case"upvote_count":return Y("desc"===e.sortDirection)}return()=>0}(q.sort)).map(e=>e.id):t)},[eu,q]),em=(0,m.i7)(S.vJ,e=>e.registerClipChangeListener);(0,c.useEffect)(()=>em(ep),[em,ep]);let eh=(0,c.useMemo)(()=>{var e,t,l;return!(0,d.A)(q,null===(l=$.data)||void 0===l?void 0:null===(t=l.pages)||void 0===t?void 0:null===(e=t[0])||void 0===e?void 0:e.filters)||!(0,d.A)(q,K)},[q,null===(I=$.data)||void 0===I?void 0:null===(T=I.pages)||void 0===T?void 0:null===(M=T[0])||void 0===M?void 0:M.filters,K]),eg=(0,c.useMemo)(()=>({contextType:h.E.Create,contextId:"create",clips:ev.map(e=>eu[e])}),[ev,eu]),ef=(0,c.useCallback)(async()=>{j(!1),G(null),Q(null),await y.S.invalidateQueries({queryKey:[K,t,_,"page"]})},[t,K,_]),ey=(0,c.useCallback)(async()=>{en&&(await H.invalidateQueries({queryKey:["workspacePins",en]}),await (0,y.B)(en),Z(e=>e+1))},[en,H]),eC=(0,c.useCallback)(async e=>{if(e!==z){if(e<=1){ef();return}try{let t=(e-1)*_-1,l=await X(t,K);(null==l?void 0:l.clip_id)&&(Q(l.clip_id),j(!0),G(e),et([]))}catch(e){console.error("Failed to set page number:",e),(0,p.oR)({title:"Error navigating to page",description:"Failed to navigate to the specified page",status:"error"})}}},[_,K,X,p.oR,ef,z]),ew=(0,c.useCallback)(()=>{console.log("resetFilters"),console.log("newFilters",e()),B(e())},[e,B]),eb=(0,c.useMemo)(()=>!(0,d.A)(q,e()),[q,e]);return(0,c.useMemo)(()=>({filters:q,setFilters:B,resetFilters:ew,canResetFilters:eb,query:$,clips:ev,workspacePinnedClips:ed,refetchPinnedClips:async()=>{await H.invalidateQueries({queryKey:["workspacePins",en],exact:!0})},pinWorkspaceClip:e=>{eo.mutate(e)},unpinWorkspaceClip:e=>{ea.mutate(e)},clipChanged:ep,applyingNewFilters:eh,playContext:eg,pageLimit:_,setPageNumber:eC,exitPageMode:ef,isPageMode:V,currentPageNumber:z,refreshCollaborativeWorkspace:ey,error:$.error}),[q,B,ew,eb,$,ev,ed,ep,eh,eg,_,eC,ef,V,z,ey,$.error])}(l,b||"feed_v3",w||P,T||N,void 0,void 0,I);return(0,i.Y)(M.Provider,{value:F,children:t})}},81779:(e,t,l)=>{l.d(t,{A:()=>a});var i=l(76790),n=l(52471),r=l(53897);function a(){let{session:e}=(0,n.gy)();return(0,i.useCallback)(async(t,l)=>{await (0,r.Kj)(e.apiClient,t,l),e.clearTooltipOnShare()},[e.apiClient,e.clearTooltipOnShare])}},85107:(e,t,l)=>{l.d(t,{A:()=>n});var i=l(93519);let n=e=>(0,i.Y)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 24 24",fill:"currentColor",...e,children:(0,i.Y)("g",{children:(0,i.Y)("path",{d:"M5.143 13C4.512 13 4 12.552 4 12s.512-1 1.143-1h13.714c.631 0 1.143.448 1.143 1s-.512 1-1.143 1z"})})})},93439:(e,t,l)=>{l.d(t,{H:()=>a,b:()=>o});var i=l(93519),n=l(76790);let r=(0,n.createContext)(void 0),a=e=>{let{children:t,onRemoveFromPlaylist:l}=e;return(0,i.Y)(r.Provider,{value:{onRemoveFromPlaylist:l},children:t})},o=()=>(0,n.useContext)(r)||{onRemoveFromPlaylist:void 0}},93855:(e,t,l)=>{l.d(t,{A:()=>n});var i=l(93519);let n=e=>(0,i.Y)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 24 24",fill:"currentColor",...e,children:(0,i.Y)("g",{children:(0,i.Y)("path",{d:"M9 2a7 7 0 0 1 6.935 6.063 7 7 0 1 1-7.872 7.872A7 7 0 0 1 9 2m6.916 8.085a7 7 0 0 1-5.831 5.83 5 5 0 1 0 5.831-5.83M9 4a5 5 0 0 0-.916 9.914 7.005 7.005 0 0 1 5.83-5.83A5 5 0 0 0 9 4"})})})},94602:(e,t,l)=>{l.d(t,{A:()=>n});var i=l(93519);let n=e=>(0,i.Y)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 24 24",fill:"currentColor",...e,children:(0,i.Y)("g",{children:(0,i.Y)("path",{d:"M10.056 20q-1.467 0-2.512-1.044T6.5 16.444t1.044-2.51 2.512-1.045q.51 0 .944.122.434.123.833.367v-8.49a.86.86 0 0 1 .256-.632.86.86 0 0 1 .633-.256h3.556a.86.86 0 0 1 .633.256.86.86 0 0 1 .256.633v1.778a.86.86 0 0 1-.256.633.86.86 0 0 1-.633.256H13.61v8.888q0 1.467-1.044 2.512Q11.52 20 10.056 20"})})})},94825:(e,t,l)=>{l.d(t,{A:()=>n});var i=l(93519);let n=e=>(0,i.Y)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 24 24",fill:"currentColor",...e,children:(0,i.Y)("g",{children:(0,i.Y)("path",{d:"M12 4c-.55 0-1 .45-1 1v14c0 .55.45 1 1 1s1-.45 1-1V5c0-.55-.45-1-1-1m6 2c-.55 0-1 .45-1 1v10c0 .55.45 1 1 1s1-.45 1-1V7c0-.55-.45-1-1-1M9 7c-.55 0-1 .45-1 1v8c0 .55.45 1 1 1s1-.45 1-1V8c0-.55-.45-1-1-1m6 1c-.55 0-1 .45-1 1v6c0 .55.45 1 1 1s1-.45 1-1V9c0-.55-.45-1-1-1m-9 2c-.55 0-1 .45-1 1v2c0 .55.45 1 1 1s1-.45 1-1v-2c0-.55-.45-1-1-1m-4 2c0 .55.45 1 1 1s1-.45 1-1-.45-1-1-1-1 .45-1 1m18 0c0 .55.45 1 1 1s1-.45 1-1-.45-1-1-1-1 .45-1 1"})})})},97552:(e,t,l)=>{l.d(t,{A:()=>n});var i=l(93519);let n=e=>(0,i.Y)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 24 24",fill:"currentColor",...e,children:(0,i.Y)("g",{children:(0,i.Y)("path",{d:"M12 22a9.7 9.7 0 0 1-3.9-.788 10.1 10.1 0 0 1-3.175-2.137q-1.35-1.35-2.137-3.175A9.7 9.7 0 0 1 2 12q0-2.075.788-3.9a10.1 10.1 0 0 1 2.137-3.175q1.35-1.35 3.175-2.137A9.7 9.7 0 0 1 12 2q2.075 0 3.9.788a10.1 10.1 0 0 1 3.175 2.137q1.35 1.35 2.137 3.175A9.7 9.7 0 0 1 22 12a9.7 9.7 0 0 1-.788 3.9 10.1 10.1 0 0 1-2.137 3.175q-1.35 1.35-3.175 2.137A9.7 9.7 0 0 1 12 22m0-2q3.35 0 5.675-2.325T20 12q0-.175-.012-.363a5 5 0 0 1-.013-.312 1.98 1.98 0 0 1-.675 1.2Q18.75 13 18 13h-2q-.825 0-1.412-.588A1.93 1.93 0 0 1 14 11v-1h-4V8q0-.824.588-1.412A1.93 1.93 0 0 1 12 6h1q0-.574.313-1.013.312-.437.762-.712a10 10 0 0 0-1.012-.2A7 7 0 0 0 12 4Q8.65 4 6.325 6.325T4 12h5q1.65 0 2.825 1.175T13 16v1h-3v2.75q.5.125.988.188Q11.475 20 12 20"})})})},99389:(e,t,l)=>{l.d(t,{A:()=>n});var i=l(93519);let n=e=>(0,i.Y)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 24 24",fill:"currentColor",...e,children:(0,i.Y)("g",{children:(0,i.Y)("path",{d:"M12 21a5.93 5.93 0 0 1-3.012-.8A5.84 5.84 0 0 1 6.8 18H4v-2h2.1a8 8 0 0 1-.087-1A40 40 0 0 1 6 14H4v-2h2q0-.5.013-1a8 8 0 0 1 .087-1H4V8h2.8a8 8 0 0 1 .788-1.075q.437-.5 1.012-.875L7 4.4 8.4 3l2.15 2.15a4.63 4.63 0 0 1 2.85 0L15.6 3 17 4.4l-1.65 1.65A5.8 5.8 0 0 1 17.2 8H20v2h-2.1q.075.5.088 1T18 12h2v2h-2q0 .5-.012 1a8 8 0 0 1-.088 1H20v2h-2.8a5.84 5.84 0 0 1-2.187 2.2Q13.625 21 12 21m-2-5h4v-2h-4zm0-4h4v-2h-4z"})})})}}]);